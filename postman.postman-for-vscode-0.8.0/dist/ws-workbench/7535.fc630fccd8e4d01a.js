"use strict";(self.webpackChunkws_workbench=self.webpackChunkws_workbench||[]).push([[7535],{56093:(e,t,s)=>{s.d(t,{Ax:()=>b,BS:()=>d,Bg:()=>X,D6:()=>x,Ey:()=>F,Fx:()=>W,GP:()=>v,HB:()=>Z,HI:()=>q,I0:()=>P,JD:()=>p,JW:()=>l,MZ:()=>H,NI:()=>R,OX:()=>_,Pk:()=>y,Re:()=>N,TK:()=>D,Ui:()=>E,Uw:()=>J,Zs:()=>C,aS:()=>I,fv:()=>m,gT:()=>M,gY:()=>j,gf:()=>f,hD:()=>V,hY:()=>B,nm:()=>c,pU:()=>z,rr:()=>K,tg:()=>A,up:()=>$,v9:()=>U,vi:()=>S,wf:()=>u,wr:()=>O,y_:()=>G});var r=s(38725),a=s(94690),n=s(35482),i=s(38394),o=s(24867);const l="idle",c="connected",d="connecting",u="reconnecting",m="disconnecting",p="connect",h="disconnect",g="cancel",y={[l]:p,[d]:g,[c]:h,[m]:p,[u]:h},v={[p]:{label:"Connect",handler:"connect"},[h]:{label:"Disconnect",handler:"disconnect"},[g]:{label:"Cancel",handler:"disconnect"}},b={OUTGOING:"outgoing",INCOMING:"incoming",CONNECTED:"meta_connected",DISCONNECTED:"meta_disconnected",RECONNECTING:"meta_reconnecting",ABORT:"meta_abort",ERROR:"meta_error",HIDDEN:"hidden",ALL:"all"},x={[l]:{label:"Disconnected",type:"critical"},[d]:{label:"Connecting",type:"info"},[c]:{label:"Connected",type:"success"},[m]:{label:"Disconnecting",type:"info"},[u]:{label:"Reconnecting",type:"info"}},f="text/plain",w="text/html",S="application/json",T="application/xml",k="application/octet-stream",j=new Set([f,w,S,T,"application/javascript"]),M={handshakeTimeout:0,retryCount:0,retryDelay:5e3,maxPayload:10},C={1e3:{code:1e3,name:"Normal Closure",description:"Connection was closed successfully."},1001:{code:1001,name:"Going Away",description:"Either because of a server failure or because the client is navigating away."},1002:{code:1002,name:"Protocol Error",description:"Endpoint terminated the connection due to a protocol error."},1003:{code:1003,name:"Unsupported Data",description:"Endpoint received data of a type it cannot accept."},1005:{code:1005,name:"No Status Received",description:"Missing status code even though one was expected."},1006:{code:1006,name:"Abnormal Closure",description:"No close frame was received."},1007:{code:1007,name:"Invalid Frame",description:"Endpoint received inconsistent data."},1008:{code:1008,name:"Policy Violation",description:"Endpoint received a message that violates its policy."},1009:{code:1009,name:"Message too big",description:"Endpoint received a data frame that was too large."},1010:{code:1010,name:"Missing Extension",description:"Server did not negotiate one or more extension expected by client."},1011:{code:1011,name:"Server Error",description:"Internal server error while operating."},1012:{code:1012,name:"Service Restart",description:"Server is restarting."},1013:{code:1013,name:"Try Again Later",description:"Temporary server error while operating."},1014:{code:1014,name:"Bad Gateway",description:"Server acting as gateway received an invalid response."},1015:{code:1015,name:"TLS Handshake",description:"Failure while performing the TLS handshake."},unknown:(e,t)=>({code:e||"Unknown",name:"Error",description:t||"Connection was closed due to an unknown error."})},I=1e3,N={[b.OUTGOING]:{Icon:r.Z,color:"content-color-warning",backgroundColor:"background-color-warning",size:"small"},[b.INCOMING]:{Icon:a.Z,color:"content-color-info",backgroundColor:"background-color-info",size:"small"},[b.ERROR]:{Icon:n.Z,color:"content-color-error",size:"large"},[b.CONNECTED]:{Icon:i.Z,color:"content-color-success",size:"large"},[b.RECONNECTING]:{Icon:o.Z,color:"content-color-primary",size:"large"},[b.ABORT]:{Icon:o.Z,color:"content-color-primary",size:"large"},[b.DISCONNECTED]:e=>e?{Icon:o.Z,color:"content-color-primary",size:"large"}:{Icon:n.Z,color:"content-color-error",size:"large"},default:{Icon:o.Z,color:"content-color-primary",size:"large"}},E={Ready:"ready",Loading:"loading",Error:"error",Empty:"empty",Truncated:"truncated"},R="jump-to-latest",A="new-messages";let O=function(e){return e.TEXT="text",e.POSTMAN_JSON="postman_json",e.JSON="json",e.XML="xml",e.HTML="html",e.HEXDUMP="hexdump",e.VIDEO="video",e.AUDIO="audio",e.IMAGE="image",e.BINARY="binary",e}({}),Z=function(e){return e.BASE64="base64",e.HEX="hex",e}({});const _={[f]:O.TEXT,[w]:O.HTML,[S]:O.POSTMAN_JSON,[T]:O.XML,[k]:O.HEXDUMP},P={[b.OUTGOING]:"Sent Messages",[b.INCOMING]:"Received Messages",addSeparator:!0,[b.ALL]:"All Messages"},H=new Set([O.VIDEO,O.AUDIO,O.IMAGE]),D=200,q={RAW:"ws-raw-request",SOCKETIO:"ws-socketio-request"},L={[q.RAW]:"Raw",[q.SOCKETIO]:"Socket.IO"},z={noPermission:"You don't have permission to connect with a WebSocket server in this workspace.",notMember:"Only workspace members can connect with a WebSocket server. Join this workspace to complete this action.",emptyURL:"Please enter the server URL",nonWsAgent:"Switch to Postman Desktop Agent to connect with a WebSocket server.",agentNotConnected:"Make sure the Desktop Agent is installed and running.",oldAgent:e=>`Youâ€™re using an older version of Postman Desktop Agent which does not support ${L[e]} WebSocket requests. Update the Desktop Agent and try again.`},U={[O.TEXT]:"Text",[O.POSTMAN_JSON]:"JSON",[O.XML]:"XML",[O.HTML]:"HTML",[O.BINARY]:"Binary",[Z.BASE64]:"Base64",[Z.HEX]:"Hexadecimal"},F={[O.TEXT]:f,[O.HTML]:w,[O.POSTMAN_JSON]:S,[O.XML]:T,[O.BINARY]:k},B=[{id:"handshakeTimeout",title:"Handshake request timeout",inputFieldType:"input",inputType:"number",defaultValue:0,description:"Set how long the handshake request should wait before timing out in milliseconds. To never time out, set to 0.",summary:"How long the handshake request will wait before timing out in milliseconds."},{id:"retryCount",title:"Reconnection attempts",inputFieldType:"input",inputType:"number",defaultValue:0,description:"Maximum reconnection attempts when the connection closes abruptly.",summary:"Maximum reconnection attempts when the connection closes abruptly."},{id:"retryDelay",title:"Reconnection intervals",inputFieldType:"input",inputType:"number",defaultValue:5e3,description:"Interval between each reconnection attempt in milliseconds.",summary:"Interval between each reconnection attempt in milliseconds."},{id:"maxPayload",title:"Maximum message size",inputFieldType:"input",inputType:"number",defaultValue:10,description:"Maximum allowed message size in MB. To receive messages of any size, set to 0.",summary:"Maximum allowed message size in MB."}],W={[b.CONNECTED]:"connected",[b.DISCONNECTED]:"disconnected",[b.ERROR]:"error",[b.RECONNECTING]:"reconnecting",[b.ABORT]:"aborted",[b.OUTGOING]:"sent-message",[b.INCOMING]:"received-message"},G=Object.entries(W).reduce(((e,[t,s])=>(e[s]=t,e)),{}),$={section:"Connection Details",dataFields:[{key:"connectedOn",label:"Connected"},{label:"Protocol",key:"protocol"},{label:"Extensions",key:"extensions"}]},J="editor",X="iframe",V={[J]:j,[X]:H},K=2},77535:(e,t,s)=>{s.d(t,{Z:()=>ca});var r=s(40540),a=s.n(r),n=s(25892),i=s.n(n),o=s(60607),l=s(58560),c=s(36306),d=s(7560),u=s(44025),m=s(15761),p=s(27366),h=s(71132),g=s(27162),y=s(5246),v=s(50916),b=s(62932),x=s(48722),f=s(38095),w=s.n(f),S=s(32940),T=s(24926),k=s(56093);let j=function(e){return e.TEXT="text",e.POSTMAN_JSON="postman_json",e.JSON="json",e.XML="xml",e.HTML="html",e.HEXDUMP="hexdump",e.VIDEO="video",e.AUDIO="audio",e.IMAGE="image",e.BINARY="binary",e}({}),M=function(e){return e.BASE64="base64",e.HEX="hex",e}({});var C=s(9029),I=s(48391),N=s(99765);function E(e){return null==e}const R={caps:"upper",format:"twos"};function A(e,t,s){if(!e)throw new Error("WebSocketRequestHelper~createMessage: Cannot create message without type");const r={id:(0,x.v4)(),type:e,meta:{},payload:{}};return s&&(r.meta=s),!E(t)&&(r.payload=t),r}function O(e,{message:t,mimeType:s,url:r}){const a=null==s?void 0:s.split("/")[0].toLowerCase();switch(e){case k.Ax.CONNECTED:return`Connected to ${r}`;case k.Ax.DISCONNECTED:return`Disconnected from ${r}`;case k.Ax.RECONNECTING:return`Reconnecting to ${r}`;case k.Ax.ABORT:return"Connection aborted";case k.Ax.ERROR:return`Could not connect to ${r}`;case k.Ax.INCOMING:case k.Ax.OUTGOING:return E(t)&&E(s)||!t?{text:"(empty)",placeholder:!0}:k.MZ.has(a)?{text:(n=a,n?n.split(" ").reduce(((e,t)=>e+t[0].toUpperCase()+t.slice(1)+" "),""):""),placeholder:!0,truncated:!1}:"string"==typeof t&&s&&k.gY.has(s)?{text:t.slice(0,k.TK),placeholder:!1,truncated:t.length>k.TK}:{text:"Binary",placeholder:!0,truncated:!1};default:return""}var n}function Z(e){return!e||!(!Array.isArray(e)||0!==e.length)||"object"==typeof e&&0===Object.keys(e).length}function _(e){return null==e?void 0:e.reduce(((e,t)=>{if(!t.key||!1===t.enabled)return e;const s=t.key;return Array.isArray(e[s])?e[s].push(t.value):e[s]?e[s]=[e[s],t.value]:e[t.key]=t.value,e}),{})}function P(e){const t=Object.keys(e);for(let r=t.length-1;r>=0;r--){var s;if("sec-websocket-protocol"===(null==(s=t[r])?void 0:s.toLowerCase()))return e[t[r]]}}function H(e){const t=k.hY.reduce(((e,t)=>(e[t.id]=t.defaultValue,e)),{}),s=(0,d.Z)({},t,e);return s.maxPayload*=1048576,s}function D(e,t){const s={};return e&&!E(e.href)&&(s["Request URL"]=e.href),e&&!E(e.method)&&(s["Request Method"]=e.method),t&&!E(t.statusCode)&&(s["Status Code"]=`${t.statusCode} ${t.statusMessage}`),e&&!E(e.headers)&&(s["Request Headers"]=_(e.headers)),t&&!E(t.headers)&&(s["Response Headers"]=_(t.headers)),Z(s)?null:s}var q=s(72586),L=s.n(q);class z{constructor(e,t){this.messages=void 0,this.streamStatus=void 0,this.expandedMessagesSet=void 0,this.messageTypeFilter=void 0,this.messageInputFilter=void 0,this.firstVisibleMessageIndex=void 0,this.selectedMessagesSet=void 0,this.reset=()=>{this.messages=[],this.setStreamStatus(k.Ui.Empty),this.expandedMessagesSet=new Set,this.messageTypeFilter=k.Ax.ALL,this.messageInputFilter="",this.firstVisibleMessageIndex=0},this.addMessage=e=>{e&&this.messages.push(e)},this.setStreamStatus=e=>{this.streamStatus=e},this.toggleMessageExpanded=e=>{this.expandedMessagesSet.has(e)?this.expandedMessagesSet.delete(e):this.expandedMessagesSet.add(e)},this.isMessageExpanded=e=>this.expandedMessagesSet.has(e),this.hideAllMessages=()=>{this.firstVisibleMessageIndex+=this.visibleMessages.length},this.restoreAllMessages=()=>{this.firstVisibleMessageIndex=0},this.setMessageTypeFilter=e=>{this.messageTypeFilter=e},this.setMessageInputFilter=e=>{this.messageInputFilter=e},this.toggleMessageSelected=e=>{this.selectedMessagesSet.has(e)?this.selectedMessagesSet.delete(e):this.selectedMessagesSet.add(e)},this.isMessageSelected=e=>this.selectedMessagesSet.has(e),this.deselectAllMessages=()=>{this.selectedMessagesSet.clear()},this.messages=e,this.streamStatus=t,this.expandedMessagesSet=new Set,this.messageTypeFilter=k.Ax.ALL,this.messageInputFilter="",this.firstVisibleMessageIndex=0,this.selectedMessagesSet=new Set,(0,b.makeObservable)(this,{messages:b.observable,streamStatus:b.observable,reset:b.action,addMessage:b.action,setStreamStatus:b.action,expandedMessagesSet:b.observable,toggleMessageExpanded:b.action,messageTypeFilter:b.observable,setMessageTypeFilter:b.action,filteredMessagesByType:b.computed,visibleMessages:b.computed,messageInputFilter:b.observable,setMessageInputFilter:b.action,filteredMessagesByInputAndType:b.computed,messagesToShow:b.computed,firstVisibleMessageIndex:b.observable,hideAllMessages:b.action,restoreAllMessages:b.action,isFilterApplied:b.computed,hasMessagesToRestore:b.computed,selectedMessagesSet:b.observable,selectedMessageDetailsList:b.computed,toggleMessageSelected:b.action,deselectAllMessages:b.action})}get visibleMessages(){return this.messages.slice(this.firstVisibleMessageIndex)}get filteredMessagesByType(){return this.messageTypeFilter===k.Ax.ALL?this.visibleMessages:new(L())(this.visibleMessages,["type"]).search(this.messageTypeFilter)}get filteredMessagesByInputAndType(){return this.messageInputFilter?new(L())(this.filteredMessagesByType,["payload","meta.preview"]).search(this.messageInputFilter):this.filteredMessagesByType}get isFilterApplied(){return this.messageInputFilter||this.messageTypeFilter!==k.Ax.ALL}get hasMessagesToRestore(){return 0!==this.firstVisibleMessageIndex}get messagesToShow(){return!this.isFilterApplied&&this.hasMessagesToRestore?[{type:k.Ax.HIDDEN},...this.filteredMessagesByInputAndType]:this.filteredMessagesByInputAndType}get selectedMessagesCount(){return this.selectedMessagesSet.size}get selectedMessageDetailsList(){const e=[];for(const t of this.selectedMessagesSet){const s=this.messages.find((e=>e.id===t));s&&e.push(s)}return e}}const U=e=>{if(void 0===e||null==e||!e.includes("?"))return[];let t;try{var s;t=new URL(e,null==(s=globalThis.location)?void 0:s.origin).searchParams}catch(e){return[]}return[...t.entries()].map((([e,t])=>({key:e,value:t,enabled:!0,description:""})))};class F{constructor(e,t=U(e)){this.queryParameters=void 0,this.url=void 0,this.url=e,this.queryParameters=b.observable.array(t),(0,b.makeObservable)(this,{queryParameters:!0,url:b.observable,setUrl:b.action,queryParams:b.computed,updateQueryParams:b.action,updateUrlFromQueryParams:b.action,updateQueryParamsFromUrl:b.action})}get queryParams(){return this.queryParameters}updateQueryParams(e){this.queryParameters=e,this.updateUrlFromQueryParams()}updateUrlFromQueryParams(){const e=new URLSearchParams(this.queryParameters.filter((e=>e.enabled)).map((e=>[e.key,void 0!==e.value?e.value:""]))).toString();null!=this.url||(this.url=""),this.url=this.url.replace(/([^?]*)?(.*)/,`$1?${e}`)}updateQueryParamsFromUrl(){const e=U(this.url);this.queryParameters=e.map(((e,t)=>{var s;return this.queryParameters.length>t?(0,d.Z)({},e,{enabled:null!=(s=this.queryParameters[t].enabled)?s:e.enabled,description:this.queryParameters[t].description||e.description}):e}))}setUrl(e){this.url=e,this.updateQueryParamsFromUrl()}}class B{constructor(){this.message=void 0,this.activeType=void 0,this.activeSubType=void 0,this.setMessage=e=>{this.message=e},this.setActiveType=e=>{this.activeType=e},this.setActiveSubType=e=>{this.activeSubType=e},this.message="",this.activeType=j.TEXT,this.activeSubType=M.BASE64,(0,b.makeObservable)(this,{message:b.observable,activeType:b.observable,activeSubType:b.observable,setMessage:b.action,setActiveType:b.action,setActiveSubType:b.action})}}var W=s(89539),G=s(38879);const $={"sec-websocket-version":{infoTitle:"This header was automatically added",info:"The Sec-WebSocket-Version header field is used in the WebSocket opening handshake. It is sent from the client to the server to indicate the protocol version of the connection. This enables servers to correctly interpret the opening handshake and subsequent data being sent from the data, and close the connection if the server cannot interpret that data in a safe manner."},"sec-websocket-key":{infoTitle:"This header was automatically added",info:"The Sec-WebSocket-Key header field is used in the WebSocket opening handshake. It is sent from the client to the server to provide part of the information used by the server to prove that it received a valid WebSocket opening handshake. This helps ensure that the server does not accept connections from non-WebSocket clients (e.g., HTTP clients) that are being abused to send data to unsuspecting WebSocket servers."},"sec-websocket-extensions":{infoTitle:"This header was automatically added",info:"The Sec-WebSocket-Extensions header field is used in the WebSocket opening handshake. It is initially sent from the client to the server, and then subsequently sent from the server to the client, to agree on a set of protocol-level extensions to use for the duration of the connection."},upgrade:{infoTitle:"This header was automatically added",info:"The WebSocket handshake uses the HTTP Upgrade header to change from the HTTP protocol to the WebSocket protocol."},host:{infoTitle:"This header was automatically added",info:"The Host request-header field specifies the Internet host and port number of the resource being requested, as obtained from the original URI."},connection:{infoTitle:"This header was automatically added",info:"The Connection general-header field allows the sender to specify options that are desired for that particular connection."}};var J=(0,G.Z)("previewHeaders");class X{constructor(e){this.userHeaders=void 0,Object.defineProperty(this,J,{writable:!0,value:void 0}),this.previewHeadersHidden=void 0,this.setUserHeaders=e=>{this.userHeaders=e},this.setPreviewHeadersHidden=e=>{this.previewHeadersHidden=e},this.userHeaders=b.observable.array(e),(0,W.Z)(this,J)[J]=[{enabled:!0,key:"Host",system:!0,value:"<calculated at runtime>"},{enabled:!0,key:"Connection",system:!0,value:"Upgrade"},{enabled:!0,key:"Upgrade",system:!0,value:"websocket"},{enabled:!0,key:"Sec-WebSocket-Key",system:!0,value:"<calculated at runtime>"},{enabled:!0,key:"Sec-WebSocket-Version",system:!0,value:"13"},{enabled:!0,key:"Sec-WebSocket-Extensions",system:!0,value:"permessage-deflate; client_max_window_bits"}],this.previewHeadersHidden=!0,(0,b.makeObservable)(this,{userHeaders:b.observable,setUserHeaders:b.action,headers:b.computed,setHeaders:b.action,previewHeadersHidden:b.observable,setPreviewHeadersHidden:b.action})}get previewHeaders(){var e;return null==(e=(0,W.Z)(this,J)[J])?void 0:e.map((e=>{var t;if(!e)return;const s=null==(t=e.key)?void 0:t.toLowerCase(),{info:r,infoTitle:a}=$[s]||{};return Object.assign({info:r,infoTitle:a,disableEdit:!0},e,{allowedToToggle:!1,previewSettingsLink:null})}))}get headers(){return[...this.previewHeaders,...this.userHeaders]}setHeaders(e){const t=[];for(const s of e)s.system||t.push(s);this.setUserHeaders(t)}}var V=s(15837);const K=e=>Object.entries(e).map((([e,t])=>({key:e,value:t}))),Y=e=>null==e?void 0:e.reduce(((e,{key:t,value:s})=>(0,d.Z)({},e,{[t]:s})),{}),Q=e=>{var t;const s=null==e||null==(t=e.payload)?void 0:t.handshakeDetails;let r="",a=null;if(null!=s&&s["Status Code"]){const e=s["Status Code"].split(" ");a=Number.parseInt(e[0],10),r=e.slice(1).join(" ")}return(0,d.Z)({},s?(0,d.Z)({handshakeRequest:{method:s["Request Method"],headers:K(s["Request Headers"]),url:s["Request URL"]}},a&&s["Response Headers"]?{handshakeResponse:{statusCode:a,statusMessage:r,headers:K(s["Response Headers"])}}:{}):{})};function ee(e){var t,s,r,a,n,i;const o={timestamp:null==(t=e.meta)?void 0:t.time,payload:{}};return o.payload=(0,d.Z)({data:te(e.payload)},null!=(s=e.meta)&&s.mimeType?{mimeType:e.meta.mimeType}:{},{size:(null==(r=e.meta)?void 0:r.size)||0},null!=(a=e.meta)&&a.fileExtension?{fileExtension:e.meta.fileExtension}:{},null!=(n=e.meta)&&n.eventName?{eventName:null==(i=e.meta)?void 0:i.eventName}:{}),o}function te(e){let t=e&&e.constructor.name;if(!t)return{payload:"",type:"String"};const s={type:t,payload:""};switch(t){case"Uint8Array":e=function(e){let t="";for(let s=0,r=e.length;s<r;s++)t+=String.fromCodePoint(e[s]);return t}(e);break;case"Object":e=JSON.stringify(e);break;default:e=String(e),t="String"}return s.payload=e,s}function se(e,{url:t},s){try{const r=function({payload:e,type:t}){if(t)switch(t){case"Uint8Array":return function(e){const t=new Uint8Array(e.length);for(let s=0,r=e.length;s<r;s++)t[s]=e.codePointAt(s);return t}(e);case"Object":return JSON.parse(e);default:return String(e)}}(e.payload.data),a=O(s,{message:r,url:t,mimeType:e.payload.mimeType});return{type:s,meta:{time:e.timestamp,mimeType:e.payload.mimeType,size:e.payload.size,eventName:e.payload.eventName,fileExtension:e.payload.fileExtension,preview:a},payload:r}}catch(e){return{}}}const re=e=>{const{handshakeRequest:t,handshakeResponse:s}=e,r=null==t?void 0:t.url,a=null==t?void 0:t.method,n=null==s?void 0:s.statusCode,i=null==s?void 0:s.statusMessage,o=Y(null==t?void 0:t.headers),l=Y(null==s?void 0:s.headers);if(r||a||n||o||l)return(0,d.Z)({"Request URL":r,"Request Method":a},n?{"Status Code":`${n} ${i}`}:{},o?{"Request Headers":o}:{},l?{"Response Headers":l}:{})},ae={[k.Ax.CONNECTED]:e=>{var t;const s={type:k.Fx[e.type],timestamp:null==(t=e.meta)?void 0:t.time,payload:{}};return s.payload=Q(e),s},[k.Ax.DISCONNECTED]:(e,t)=>{var s,r;const a={type:k.Fx[e.type],timestamp:null==(s=e.meta)?void 0:s.time,payload:{}},n=e.payload||{};return a.payload=(0,d.Z)({},n.code?{code:n.code}:{},{reason:n.name}),1e3===n.code?t&&(t.result="success"):[1002,1003,1005,1006,1007,1008,1009,1010].includes(n.code)?t&&(t.result="client-error"):[1001,1011,1012,1013,1014,1015].includes(n.code)&&t&&(t.result="server-error"),t&&(t.summary=(null==(r=k.Zs[n.code])?void 0:r.name)||"Error"),a},[k.Ax.ERROR]:(e,t)=>{var s,r;const a={type:k.Fx[e.type],timestamp:null==(s=e.meta)?void 0:s.time,payload:{}},n=null==e||null==(r=e.payload)?void 0:r.error;return a.payload=(0,d.Z)({},n?{error:{message:n}}:{},Q(e)),n&&t&&(t.result="client-error",t.summary=n),a},[k.Ax.RECONNECTING]:e=>{var t;return{type:k.Fx[e.type],timestamp:null==(t=e.meta)?void 0:t.time,payload:{}}},[k.Ax.ABORT]:(e,t)=>{var s;const r={type:k.Fx[e.type],timestamp:null==(s=e.meta)?void 0:s.time,payload:{}};return t&&(t.summary="aborted"),r}},ne=(0,d.Z)({},ae,{[k.Ax.INCOMING]:ee,[k.Ax.OUTGOING]:ee}),ie={connected:(e,{url:t})=>{const s=k.y_[e.type];return{type:s,meta:{time:e.timestamp,mimeType:"application/json",preview:O(s,{url:t})},payload:{handshakeDetails:re(e.payload)}}},disconnected:(e,{url:t})=>{const s=k.y_[e.type];return{type:s,meta:{time:e.timestamp,mimeType:"text/plain",preview:O(s,{url:t})},payload:{code:e.payload.code,name:e.payload.reason,description:(r=e.payload,(null==(a=k.Zs[r.code])?void 0:a.description)||k.Zs.unknown(r.code,"Error"!==r.reason?r.reason:"").description)}};var r,a},error:(e,{url:t})=>{const s=k.y_[e.type];return{type:s,meta:{time:e.timestamp,mimeType:"application/json",preview:O(s,{url:t})},payload:{error:e.payload.error.message,handshakeDetails:re(e.payload)}}},reconnecting:(e,{url:t})=>{const s=k.y_[e.type];return{type:s,meta:{time:e.timestamp,mimeType:"text/plain",preview:O(s,{url:t})}}},aborted:(e,{url:t})=>{const s=k.y_[e.type];return{type:s,meta:{time:e.timestamp,mimeType:"text/plain",preview:O(s,{url:t})}}}},oe=(0,d.Z)({},ie,{"sent-message":se,"received-message":se});function le(e){return e.map((e=>{const t={key:e.key,value:e.value,description:"",disabled:!1};return!1===e.enabled&&(t.disabled=!0),e.description&&(t.description=e.description),t}))}function ce(e){return e.map((e=>{const t={key:e.key,value:e.value,description:"",enabled:!0};return t.enabled=!e.disabled,t}))}var de=s(17712);class ue{constructor({context:e,events:t}){var s,r,a,n,i=this;this.requestMetaData={id:"",workspaceId:null},this.urlStore=void 0,this.status=void 0,this.connectionId=void 0,this.settings=void 0,this.handshakeError=void 0,this.messagesStore=void 0,this.requestMessageStore=void 0,this.headersStore=void 0,this.connectionStatistics=void 0,this.autoRunRequest=void 0,this.resetConnection=()=>{this.status=k.JW,this.connectionId=""},this.setStatus=e=>{this.status=e},this.addMessage=e=>{this.messagesStore.addMessage(e)},this.setConnectionStatistics=e=>{this.connectionStatistics=e},this.prepareConnection=()=>{this.resetConnection(),this.connectionId=(0,x.v4)(),this.handshakeError=!1,this.messagesStore.reset(),this.setConnectionStatistics({}),this.setStatus(k.BS),this.messagesStore.setStreamStatus(k.Ui.Ready)},this.wsConnect=async function(){if(!i.urlStore.url||i.status!==k.JW)return;V.AnalyticsService.addEventV2({category:"ws-raw",action:"send-request",label:"ws-workbench",value:1}),i.prepareConnection();const e=await async function(e){const t=_(e.headers);return{url:e.url,headers:t,protocols:P(t),options:H(e.settings)}}({url:i.urlStore.url,settings:(0,b.toJS)(i.settings),headers:(0,b.toJS)(i.headersStore.userHeaders)}),t=((e,t,s)=>(0,C.connectWebSocketViaAgent)(e,t,s))(i.connectionId,e,{variables:{},onOpen:({request:e,response:t})=>{i.setStatus(k.nm),i.setConnectionStatistics({connectedOn:(0,T.format)(new Date,"MMM do yyyy,  HH:mm")}),de.pmConsole.logRequest({request:e,response:t});const s=A(k.Ax.CONNECTED,{handshakeDetails:D(e,t)},{preview:O(k.Ax.CONNECTED,{url:i.urlStore.url}),time:(new Date).toISOString(),mimeType:k.vi});i.addMessage(s)},onUpgrade:()=>{},onMessage:({message:e,meta:t})=>{if(!e)return;e&&e instanceof ArrayBuffer&&(e=new Uint8Array(e));const s=A(k.Ax.INCOMING,e,{preview:O(k.Ax.INCOMING,{message:e,mimeType:t.mimeType}),time:new Date(t.timestamp).toISOString(),size:t.size,mimeType:t.mimeType,fileExtension:t.ext});i.addMessage(s)},onReconnect:()=>{i.setStatus(k.wf)},onEnd:({code:e,reason:s,aborted:r})=>{let a;t&&t(),r?a=A(k.Ax.ABORT,null,{preview:O(k.Ax.ABORT,{url:i.urlStore.url}),time:(new Date).toISOString(),mimeType:k.gf}):i.handshakeError||(a=A(k.Ax.DISCONNECTED,function(e,t){if(!e)return null;const s=k.Zs[e];return s?{code:e,name:s.name,description:t||s.description}:k.Zs.unknown(e,t)}(e,s),{preview:O(k.Ax.DISCONNECTED,{url:i.urlStore.url}),time:(new Date).toISOString(),mimeType:k.gf})),a&&i.addMessage(a);const n=(e=>{const t=(0,b.toJS)({id:null,type:k.HI.RAW,title:"Untitled WebSocket Request",payload:{url:e.urlStore.url,headers:le(e.headersStore.userHeaders),queryParams:le(e.urlStore.queryParams),settings:e.settings},extensions:{documentation:{content:""}}});return{workspaceId:e.requestMetaData.workspaceId,url:(0,b.toJS)(e.urlStore.url),item:t}})(i),o=function(e){const t=[],s={result:"success",summary:"Normal Closure"};for(const r of(0,b.toJS)(e.messagesStore.messages)){const e=k.Fx[r.type];if(!e)continue;const a=(0,ne[r.type])(r,s);t.push((0,d.Z)({},a,{type:e}))}return t.push(s),t}(i);(0,I.createWsRawHistory)([n,...o]).catch((()=>{})),i.resetConnection()},onError:({error:e,request:t,response:s})=>{const r=e&&(e.data||e.message)||"Socket connection error. Please try again.",a=A(k.Ax.ERROR,{error:r,handshakeDetails:D(t,s)},{preview:O(k.Ax.ERROR,{url:i.urlStore.url}),time:(new Date).toISOString(),mimeType:k.vi});i.addMessage(a),i.handshakeError=!0}})},this.wsDisconnect=()=>{var e;this.connectionId&&(this.setStatus(k.fv),e=this.connectionId,(0,C.disconnectWebSocketViaAgent)(e))},this.wsSend=async function(){i.connectionId||i.status!==k.JW||(i.wsConnect(),await new Promise((e=>{if(i.status===k.nm)return e();const t=(0,b.reaction)((()=>i.status),(s=>{s===k.nm&&(t&&t(),e())}))})));const e=i.requestMessageStore.activeType,t=i.requestMessageStore.activeSubType;let s=i.requestMessageStore.message;if(e===j.POSTMAN_JSON)s=w()(s,{whitespace:!1});else if(e===j.BINARY)try{s=function(e,t){let s;if(t===M.BASE64){const t=e.split(/\r?\n/).map((e=>e.replace(/\s+/g,""))).filter(Boolean).map((e=>function(e){if(!/^([\d+/A-Za-z]{4})*([\d+/A-Za-z]{3}=|[\d+/A-Za-z]{2}==)?$/.test(e))throw new SyntaxError("Invalid Base64");return e}(e))).map((e=>S.Buffer.from(e,"base64")));s=S.Buffer.concat(t)}else{if(t!==M.HEX)throw new TypeError(`Unrecognized binary format: ${t}`);s=S.Buffer.from(function(e){if(!/^([\dA-Fa-f]{2})*$/.test(e))throw new SyntaxError("Invalid Hexadecimal");return e}(e.replace(/\s+/g,"")),"hex")}return new Uint8Array(s.buffer,s.byteOffset,s.length)}(s,t)}catch(e){if(e instanceof SyntaxError)return void(0,c.Am)({title:"Unable to send message",status:"error",description:e.message});throw e}const r=ArrayBuffer.isView(s)?(o=s,S.Buffer.from(o.buffer,o.byteOffset,o.byteLength).toString("base64")):s,a=S.Buffer.byteLength(s),n=k.Ey[e];var o,l,d,u,m;l=i.connectionId,d=r,u={messageType:e},m=()=>{const e=A(k.Ax.OUTGOING,s,{preview:O(k.Ax.OUTGOING,{message:s,mimeType:n}),time:(new Date).toISOString(),size:a,mimeType:n});i.addMessage(e)},(0,C.sendWebSocketMessageViaAgent)(l,d,u,m)},this.requestMetaData={id:e.id,workspaceId:e.workspaceId},this.urlStore=new F(null==(s=e.item.payload)?void 0:s.url,null==(r=e.item.payload)?void 0:r.queryParams),this.headersStore=new X(null==(a=e.item.payload)?void 0:a.headers),this.settings=null==(n=e.item.payload)?void 0:n.settings,this.connectionStatistics={};const{messages:o,messagesStreamStatus:l}=function(e={},t=[]){const s=[];let r=k.Ui.Empty;for(const r of t){var a;const t=(0,x.v4)(),n=k.y_[r.type];if(!n)continue;const i=(0,oe[r.type])(r,{url:null==(a=e.item.payload)?void 0:a.url},n);s.push((0,d.Z)({id:t},i))}return s.length>0&&(r=k.Ui.Ready),t.some((e=>void 0===e.payload))&&(r=k.Ui.Truncated),{messages:s,messagesStreamStatus:r}}(e,t)||{messages:[],messagesStreamStatus:k.Ui.Empty};this.messagesStore=new z(o,l),this.status=k.JW,this.connectionId="",this.handshakeError=!1,this.requestMessageStore=new B,this.autoRunRequest=e.item.autoRunRequest,(0,b.makeObservable)(this,{status:b.observable,setStatus:b.action,addMessage:b.action,resetConnection:b.action,prepareConnection:b.action,connectionStatistics:b.observable,setConnectionStatistics:b.action,isEditable:b.computed,autoRunRequest:!0})}get isEditable(){return this.status===k.JW}}var me=s(52322);const pe=a().createContext({}),he=({children:e})=>{const{historyId:t}=(0,o.useParams)();if(!(0,o.useInRouterContext)())throw new Error("RequestEditorProvider must be used within a Router");const s=(()=>{const e=(0,o.useLoaderData)(),{workspaceId:t}=(0,o.useParams)();if(null!=e&&e.wsRawRequestData&&e.wsRawRequestData.length>0){var s,r;const t=e.wsRawRequestData,{context:n,events:i}={context:(a=t)[0],events:a.slice(1,-1),conclusion:a[a.length-1]};return(null==(s=n.item)||null==(s=s.payload)?void 0:s.queryParams)&&(n.item.payload.queryParams=ce(n.item.payload.queryParams)),(null==(r=n.item)||null==(r=r.payload)?void 0:r.headers)&&(n.item.payload.headers=ce(n.item.payload.headers)),{context:n,events:i}}var a;return{context:{workspaceId:t,id:"",item:{id:"",title:"Untitled WebSocket Request",type:k.HI.RAW,payload:{url:"",queryParams:[],headers:[],settings:k.gT}}}}})(),a=(0,r.useMemo)((()=>new ue(s)),[t]);return(0,me.jsx)(pe.Provider,{value:a,children:e})},ge=()=>{const e=(0,r.useContext)(pe);if(!e)throw new Error("useWsRequestStore should only be used inside WsRequestContext");return e},ye=()=>{const e=ge().urlStore;return{queryParams:e.queryParams,updateQueryParams:e.updateQueryParams.bind(e)}};let ve;const be=i().div(ve||(ve=(e=>e)`
  display: inline-flex;
  width: calc(0.5 * var(--spacing-m));
  height: calc(0.5 * var(--spacing-m));
  margin-left: var(--spacing-xs);
  border-radius: calc(0.5 * var(--spacing-m));
  background-color: var(--base-color-success);
`)),xe=()=>(0,me.jsx)(be,{"aria-label":"tab with active values","data-testid":"tab-indicator-dot"}),fe=(0,v.observer)((()=>{const{queryParams:e}=ye();return(0,me.jsxs)(me.Fragment,{children:["Params",e.length>0&&(0,me.jsx)(xe,{})]})}));fe.displayName="observer(ParamsTabHeader)";const we=()=>{const e=ge().headersStore;return{headers:e.headers,setHeaders:e.setHeaders.bind(e)}};let Se;const Te=i().span(Se||(Se=(e=>e)`
  padding: var(--spacing-zero) var(--spacing-xs);
  color: var(--content-color-success);
`)),ke=(0,v.observer)((()=>{const{headers:e}=we(),t=e.length>0?(0,me.jsxs)(Te,{children:["(",e.length,")"]}):null;return(0,me.jsxs)("div",{children:["Headers",t]})}));ke.displayName="observer(HeadersTabHeader)";var je=s(96497);const Me=()=>({isEditable:ge().isEditable});let Ce;const Ie=i().div(Ce||(Ce=(e=>e)`
  display: flex;
  flex-direction: column;
  justify-content: center;
  box-sizing: border-box;
  height: ${0};
  font-size: ${0};
  color: ${0};
  font-weight: ${0};
  margin: var(--spacing-xs) var(--spacing-zero);
`),(e=>e.theme["size-m"]),(e=>e.theme["text-size-m"]),(e=>e.theme["content-color-secondary"]),(e=>e.theme["text-weight-medium"])),Ne=(0,v.observer)((()=>{const{queryParams:e,updateQueryParams:t}=ye(),{isEditable:s}=Me();return(0,me.jsxs)(me.Fragment,{children:[(0,me.jsx)(Ie,{children:"Query Params"}),(0,me.jsx)(je.KeyValueEditor,{tableName:"Query Params",allowedColumns:["key","value"],showColumns:["key","value"],values:e,onChange:t,disableSorting:!1,nonEditableKeys:!s,nonEditableValues:!s,nonEditableToggles:!s,disableBulkEdit:!0,disableMultilineKey:!0,disableMultilineValue:!0})]})}));var Ee=s(80605),Re=s(35736),Ae=s(43294),Oe=s(64691),Ze=s(48263),_e=s(30610),Pe=s(17282);const He={[j.TEXT]:k.v9[j.TEXT],[j.HTML]:k.v9[j.HTML],[j.POSTMAN_JSON]:k.v9[j.POSTMAN_JSON],[j.XML]:k.v9[j.XML]},De=(0,v.observer)((e=>{const t=e.languageMap||He,s=a().useRef(null);return(0,me.jsxs)(Oe.Z,{children:[(0,me.jsx)(Ze.Z,{ref:s,text:t[e.activeLanguage],type:"tertiary"}),(0,me.jsx)(_e.Z,{children:Object.entries(t).map((t=>{const s=t[0],r=t[1];return(0,me.jsx)(Pe.Z,{refKey:s,onClick:()=>{null==e.onChange||e.onChange(s)},children:(0,me.jsx)("span",{children:r})},s)}))})]})}));De.displayName="observer(WebSocketMessageLanguageSelector)";const qe=()=>ge().status,Le=()=>{const e=ge().urlStore;return{url:e.url,setUrl:e.setUrl.bind(e)}},ze=()=>ge().wsSend,Ue=new Set(["Alt","Meta","Control","Shift"]);var Fe=s(73720);const Be="request-send-button-paint-time",We="ws-message-code-editor-paint-time",Ge="request-send-button-paint-mark",$e="ws-message-code-editor-paint-mark";let Je,Xe,Ve,Ke,Ye,Qe=e=>e;const{PerfContext:et}=Fe.perfComponents,tt=()=>{performance.measure(We,{},$e),(0,Fe.sendMeasureEvent)({name:We})},st={[k.wr.TEXT]:k.v9[k.wr.TEXT],[k.wr.POSTMAN_JSON]:k.v9[k.wr.POSTMAN_JSON],[k.wr.XML]:k.v9[k.wr.XML],[k.wr.HTML]:k.v9[k.wr.HTML],[k.wr.BINARY]:k.v9[k.wr.BINARY]},rt={[k.HB.BASE64]:k.v9[k.HB.BASE64],[k.HB.HEX]:k.v9[k.HB.HEX]},at=new Set([k.wr.TEXT,k.wr.BINARY]),nt=(0,r.lazy)((()=>s.e(1544).then(s.t.bind(s,31544,23)))),it=i().div(Je||(Je=Qe`
  display: flex;
  flex: 1;
  flex-direction: column;
  height: 100%;
  width: 100%;
  margin-right: var(--spacing-s);
`)),ot=i().div(Xe||(Xe=Qe`
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  padding-top: var(--spacing-l);
  align-items: center;
  justify-content: center;

  // If the editor container is shrunk, the text-editor was not getting resized
  // accordingly in Firefox. This fixes the resizing issue.
  min-height: 0;

  .text-editor .monaco-editor {
    .margin-view-overlays .line-numbers {
      color: var(--content-color-tertiary);
    }

    .monaco-placeholder {
      font-size: var(--text-size-m);
      line-height: var(--line-height-m);
      color: var(--content-color-tertiary);
    }
  }
`)),lt=i().div(Ve||(Ve=Qe`
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--spacing-s) var(--spacing-zero);
  border-top: var(--border-width-default) var(--border-style-solid)
    var(--border-color-default);
`)),ct=i().div(Ke||(Ke=Qe`
  display: flex;
  align-items: center;
`)),dt=i()(Ee.Z)(Ye||(Ye=Qe`
  background-color: ${0};
  font-size: var(--text-size-m);
  font-weight: var(--text-weight-medium);
  color: ${0};

  &:hover,
  &.is-hovered {
    background-color: ${0};
  }
`),(e=>"primary"===e.type?"var(--base-color-info)":"var(--highlight-background-color-secondary)"),(e=>"primary"===e.type?"var(--content-color-constant)":"var(--content-color-secondary)"),(e=>"primary"===e.type?"var(--highlight-background-color-info)":"var(--highlight-background-color-tertiary)")),ut=(0,v.observer)((()=>{const e=(0,r.useRef)(null),[t,s]=(0,r.useState)(null),{requestMessage:a,setRequestMessage:n}=(()=>{const e=ge().requestMessageStore;return{requestMessage:e.message,setRequestMessage:e.setMessage.bind(e)}})(),{activeType:i,setActiveType:o}=(()=>{const e=ge().requestMessageStore;return{activeType:e.activeType,setActiveType:e.setActiveType.bind(e)}})(),{activeSubType:l,setActiveSubType:c}=(()=>{const e=ge().requestMessageStore;return{activeSubType:e.activeSubType,setActiveSubType:e.setActiveSubType.bind(e)}})(),d=(e=>e===k.wr.BINARY)(i),u=ze();return(({ctrlKey:e,shiftKey:t,altKey:s,keys:a,callback:n,bindingElementRef:i})=>{const o=(0,r.useRef)([]),l=(0,r.useRef)(!1),c=(0,r.useRef)(!1),d=(0,r.useRef)(!1),u=(0,r.useRef)(null),m=(0,r.useRef)(n);m.current=n,(0,r.useEffect)((()=>{const r=r=>{if((r.ctrlKey||r.metaKey)&&(l.current=!0),r.shiftKey&&(c.current=!0),r.altKey&&(d.current=!0),!Ue.has(r.key)&&Array.isArray(a)){const e=a.findIndex((e=>e.toLowerCase()===r.key.toLowerCase()));-1!==e&&(o.current[e]=r.key)}const n=!e||l.current,i=!t||c.current,p=!s||d.current;if(u.current=setTimeout((()=>{l.current=!1,c.current=!1,d.current=!1,o.current=[]}),250),n&&i&&p){if(Array.isArray(a)&&((e,t)=>{let s=0;for(const a of e){var r;if(a.toLowerCase()!==(null==(r=t[s])?void 0:r.toLowerCase()))return!1;s++}return!0})(a,o.current))return m.current();if(a===r.key)return m.current()}},n=null!=i?i:window;return n.addEventListener("keydown",r),()=>{n.removeEventListener("keydown",r),u.current&&clearTimeout(u.current)}}),[e,t,s,a,i])})({ctrlKey:!0,keys:"Enter",callback:()=>{u()},bindingElementRef:t}),(0,me.jsxs)(it,{children:[(0,me.jsx)(ot,{ref:s,children:(0,me.jsx)(r.Suspense,{fallback:(0,me.jsx)(Re.Z,{}),children:(0,me.jsx)(et.Provider,{value:{markName:$e,callback:tt},children:(0,me.jsx)(nt,{ref:e,fontSize:12,placeholder:"Compose message",language:d?l:i,wordWrap:!0,value:a,onChange:n,autoFormat:!0,showNonPrintableCharacters:!0})})})}),(0,me.jsxs)(lt,{children:[(0,me.jsxs)(ct,{children:[(0,me.jsx)(De,{languageMap:st,activeLanguage:i,onChange:e=>o(e)}),d&&(0,me.jsx)(De,{languageMap:rt,activeLanguage:l,onChange:e=>c(e)}),!at.has(i)&&(0,me.jsx)(Ee.Z,{onClick:()=>{var t;return null==(t=e.current)?void 0:t.beautifyContent()},type:"tertiary",icon:(0,me.jsx)(Ae.Z,{}),tooltip:"Beautify"})]}),(0,me.jsx)(mt,{})]})]})}));ut.displayName="observer(WsRequestMessagesPanel)";const mt=(0,v.observer)((()=>{let e;const t=qe(),{url:s}=Le(),r=ze(),{isDisabled:a,reason:n}=function(e){let t;return{isDisabled:Boolean(Z(e)&&(t=k.pU.emptyURL)),reason:t}}(s),i=a&&(e=n)||t!==k.nm&&t!==k.JW,o=e;return(0,me.jsx)(dt,{type:t===k.nm?"primary":"secondary",text:"Send",onClick:r,tooltip:o,isDisabled:i})}));mt.displayName="observer(SendButton)";var pt=s(33105),ht=s(36166);let gt;const yt=i()(l.Z)(gt||(gt=(e=>e)`
  box-sizing: border-box;
  height: var(--size-m);
  font-size: var(--text-size-m);
  color: var(--content-color-secondary);
  font-weight: var(--text-weight-medium);
  margin: var(--spacing-xs) var(--spacing-zero);
`)),vt=(0,v.observer)((()=>{const{headers:e,setHeaders:t}=we(),{isEditable:s}=Me(),{previewHeaders:a}={previewHeaders:ge().headersStore.previewHeaders},{previewHeadersHidden:n,setPreviewHeadersHidden:i}=(()=>{const e=ge().headersStore;return{previewHeadersHidden:e.previewHeadersHidden,setPreviewHeadersHidden:e.setPreviewHeadersHidden}})(),o=(0,r.useMemo)((()=>new Set(a.map((e=>null==e?void 0:e.key)))),[a]),l=(0,r.useMemo)((()=>n?e.filter((e=>!o.has(e.key))):e),[e,a,n]),c=n?{text:`${a.length} hidden`,icon:(0,me.jsx)(pt.Z,{}),tooltip:"These headers will be automatically added and sent with the request. Click to view and modify these headers."}:{text:"Hide auto-generated headers",icon:(0,me.jsx)(ht.Z,{}),tooltip:"Click to hide these headers. They will still be automatically added and sent with the request."};return(0,me.jsxs)(me.Fragment,{children:[(0,me.jsxs)(yt,{alignItems:"center",gap:"spacing-s",children:[(0,me.jsx)("span",{role:"heading",children:"Headers"}),(0,me.jsx)(Ee.Z,(0,d.Z)({},c,{size:"small",onClick:()=>i(!n)}))]}),(0,me.jsx)(je.KeyValueEditor,{tableName:"Request Headers",allowedColumns:["key","value"],showColumns:["key","value"],values:l,onChange:t,disableSorting:!1,nonEditableKeys:!s,nonEditableValues:!s,nonEditableToggles:!s,disableBulkEdit:!0,disableMultilineKey:!0,disableMultilineValue:!0})]})}));vt.displayName="observer(WebSocketHeadersPanel)";var bt=s(49437),xt=s(80047);let ft;const wt=i()(l.Z)(ft||(ft=(e=>e)`
  overflow: hidden;
`));function St({description:e}){return(0,me.jsx)(wt,{direction:"column",height:"100%",justifyContent:"center",alignItems:"center",children:(0,me.jsx)(bt.Z,{title:"Coming Soon",description:e,children:(0,me.jsx)(xt.Z,{name:"illustration-no-custom-domain"})})})}let Tt,kt,jt,Mt=e=>e;const Ct=i()(u.PaneContent)(Tt||(Tt=Mt`
  box-sizing: border-box;
  width: 100%;
  overflow: auto;
`)),It=i()(m.Z)(kt||(kt=Mt`
  box-sizing: border-box;
  padding: ${0};
  width: 100%;
`),(e=>`${e.theme["spacing-zero"]} ${e.theme["spacing-s"]}`)),Nt=i()(m.Z)(jt||(jt=Mt`
  box-sizing: border-box;
  padding: ${0};

  /**
   * Following selectors help provide TabPanels height of the parent.
   */
  &,
  > div,
  > div > div {
    height: 100%;
  }
`),(e=>`${e.theme["spacing-zero"]} ${e.theme["spacing-s"]}`)),Et=()=>(0,me.jsx)(u.PaneHeader,{defaultLayout:"horizontal",horizontalComponent:null,verticalComponent:(0,me.jsx)(u.PaneLabel,{layout:"vertical",label:"Request Editor",arrowDirection:"right"})}),Rt=()=>{const[e,t]=a().useState(0);return(0,me.jsxs)(me.Fragment,{children:[(0,me.jsx)(At,{activeTab:e,switchTab:t}),(0,me.jsx)(Ct,{children:(0,me.jsx)(Ot,{activeTabIndex:e})})]})},At=e=>(0,me.jsx)(It,{activeTabIndex:e.activeTab,onChange:function(t){e.switchTab(t)},type:"primary",incrementallyCreateTabs:!0,destroyInactiveTabs:!0,children:(0,me.jsxs)(p.Z,{children:[(0,me.jsx)(h.Z,{label:"Message"}),(0,me.jsx)(h.Z,{label:(0,me.jsx)(fe,{})}),(0,me.jsx)(h.Z,{label:(0,me.jsx)(ke,{})}),(0,me.jsx)(h.Z,{label:"Settings"})]})}),Ot=e=>(0,me.jsx)(Nt,{activeTabIndex:e.activeTabIndex,incrementallyCreateTabs:!0,destroyInactiveTabs:!0,children:(0,me.jsxs)(g.Z,{children:[(0,me.jsx)(y.Z,{children:(0,me.jsx)(ut,{})}),(0,me.jsx)(y.Z,{children:(0,me.jsx)(Ne,{})}),(0,me.jsx)(y.Z,{children:(0,me.jsx)(vt,{})}),(0,me.jsx)(y.Z,{children:(0,me.jsx)(St,{description:"Support for Settings is coming soon."})})]})});var Zt=s(9460),_t=s(22922),Pt=s(44306),Ht=s(29706),Dt=s(26081),qt=s(20856);let Lt;const zt=i()(qt.ZP)(Lt||(Lt=(e=>e)`
  .tippy-content {
    background-color: var(--background-color-primary);
  }

  .tippy-svg-arrow > svg > path {
    fill: var(--background-color-primary);
  }
`)),Ut="http",Ft="ws-raw",Bt="grpc";let Wt,Gt,$t,Jt,Xt,Vt=e=>e;const Kt=i().div(Wt||(Wt=Vt`
  height: 24px;
  width: 24px;
  box-sizing: border-box;
`)),Yt=i()(Ee.Z)(Gt||(Gt=Vt`
  height: 24px;
  width: 24px;
  background-color: var(--background-color-tertiary);
  border: var(--border-width-default) var(--border-style-solid)
    var(--border-color-default);
  cursor: pointer;

  &:hover {
    background-color: var(--highlight-background-color-tertiary);
  }

  > i > svg > path {
    fill: ${0};
  }
`),(e=>e.theme[e.color])),Qt=i().div($t||($t=Vt`
  padding-left: var(--spacing-s);
  padding-top: var(--spacing-xs);
`)),es=i()(Dt.Link)(Jt||(Jt=Vt`
  display: flex;
  flex-direction: row;
  justify-content: flex-start;
  align-items: center;
  line-height: var(--line-height-xl);
  padding: var(--spacing-zero) var(--spacing-s);
  border-radius: var(--border-radius-default);

  &:hover {
    background-color: var(--background-color-tertiary);
  }

  color: var(--content-color-primary);
`)),ts=i().div(Xt||(Xt=Vt`
  margin-left: var(--spacing-s);
`)),ss={[Ut]:{label:"HTTP",Icon:_t.Z,iconColor:"content-color-success"},[Ft]:{label:"WebSocket",Icon:Pt.Z,iconColor:"content-color-brand"},[Bt]:{label:"gRPC",Icon:Ht.Z,iconColor:"content-color-info"}},rs={[Ut]:"/request/create",[Ft]:"/ws-raw-request/create",[Bt]:"/grpc-request/create"},as=()=>{const e=(0,o.useParams)(),t=(0,o.useMatch)("/workspace/:workspaceId/:protocol/create"),[s,r]=a().useState(!1);if(!t)return(0,me.jsx)(Qt,{children:(0,me.jsx)(Pt.Z,{color:"content-color-brand","data-testid":"aether-icon-WebSocket"})});const n=(0,me.jsx)(Yt,{type:"secondary",icon:(0,me.jsx)(Pt.Z,{"data-testid":"aether-icon-WebSocket"}),color:"content-color-brand",onClick:()=>r((e=>!e)),"data-testid":"protocol-switcher"});return(0,me.jsx)(Kt,{children:(0,me.jsx)(zt,{trigger:n,isOpen:s,onClickOutside:()=>r(!1),children:Object.keys(ss).map((t=>{const{label:s,Icon:a}=ss[t];return(0,me.jsxs)(es,{to:`/workspace/${e.workspaceId}${rs[t]}`,onClick:()=>{V.AnalyticsService.addEventV2({category:"request",action:"switch-protocol",label:t}),r(!1)},children:[(0,me.jsx)(a,{color:ss[t].iconColor}),(0,me.jsx)(ts,{children:s})]},t)}))})})};let ns;const is=i().div(ns||(ns=(e=>e)`
  display: flex;
  flex-direction: 'row';
  justify-content: space-between;
  box-sizing: border-box;
  height: 48px;
  padding: var(--spacing-s);
  border-bottom: var(--border-width-default) var(--border-style-solid)
    var(--border-color-default);
`)),os=(0,v.observer)((()=>{const{url:e}=Le(),t=(0,r.useMemo)((()=>e||"Untitled WebSocket Request"),[e]),{setTabTitle:s}=(0,u.useTabTitleMeta)();return(0,r.useEffect)((()=>{s(t,"ws-raw")}),[t,s]),(0,me.jsxs)(l.Z,{direction:"row",alignItems:"center",gap:"spacing-s",children:[(0,me.jsx)(as,{}),(0,me.jsx)(Zt.ZP,{color:"content-color-primary",type:"strong",children:t})]})}));os.displayName="observer(MetaHeaderLeftSection)";const ls=()=>(0,me.jsx)(is,{role:"heading",children:(0,me.jsx)(os,{})});var cs=s(68206);let ds,us,ms,ps=e=>e;const{PerformanceMarkPaint:hs}=Fe.perfComponents,gs=i()(l.Z)(ds||(ds=ps`
  box-sizing: border-box;
  padding: var(--spacing-s);
`)),ys=i()(cs.Z)(us||(us=ps`
  height: 40px;
  border-color: var(--border-color-default);
  &:focus-within {
    box-shadow: 0 0 0 2px var(--base-color-info);
    border-right: none;
    border: var(--border-width-default) var(--border-style-solid)
      var(--base-color-info);
  }
  background-color: var(--background-color-primary);
  color: var(--content-color-primary);
  box-shadow: ${0};
`),(e=>e.isDisabled&&"none")),vs=i()(Ee.Z)(ms||(ms=ps`
  height: 40px;
  flex-shrink: 0;
  flex-basis: 100px;
  background-color: ${0};
  font-size: var(--text-size-l);
  font-weight: var(--text-weight-medium);
  color: ${0};

  &:hover,
  &.is-hovered {
    background-color: ${0};
  }
`),(e=>"primary"===e.type?"var(--base-color-info)":"var(--highlight-background-color-secondary)"),(e=>"primary"===e.type?"var(--content-color-constant)":"var(--content-color-secondary)"),(e=>"primary"===e.type?"var(--highlight-background-color-info)":"var(--highlight-background-color-tertiary)")),bs=(0,v.observer)((()=>{const{url:e,setUrl:t}=Le(),{isEditable:s}=Me();return(0,me.jsx)(ys,{placeholder:"Enter server URL",value:e,size:"small",onChange:e=>{t(e.target.value)},isDisabled:!s})}));bs.displayName="observer(RequestURLInput)";const xs=(0,v.observer)((()=>{var e;const t=qe(),s=(()=>{const{historyId:e}=(0,o.useParams)();return e?"history-request":"new-request"})(),a=k.Pk[t],n=null==(e=k.GP[a])?void 0:e.label,i=a===k.JD?ge().wsConnect:ge().wsDisconnect,{autoRunRequest:l}={autoRunRequest:ge().autoRunRequest};return(0,r.useEffect)((()=>{l&&i()}),[]),(0,me.jsx)(hs,{markName:Ge,callback:()=>{return e=s,performance.measure(Be,{},Ge),void(0,Fe.sendMeasureEvent)({name:Be,label:e,entityType:"ws-workbench"});var e},children:(0,me.jsx)(vs,{type:a===k.JD?"primary":"secondary",text:(0,me.jsx)("span",{id:"websocket-button-title","aria-label":"Connect WebSocket",children:n}),onClick:i})})}));xs.displayName="observer(SendButton)";const fs=()=>(0,me.jsx)("form",{onSubmit:e=>e.preventDefault(),children:(0,me.jsxs)(gs,{direction:"row",alignItems:"center",gap:"spacing-s",children:[(0,me.jsx)(bs,{}),(0,me.jsx)(xs,{})]})});var ws=s(8851),Ss=s(60949),Ts=s(53723),ks=s.n(Ts),js=s(38725),Ms=s(83587),Cs=s.n(Ms),Is=s(95362);const Ns=()=>{const e=ge().messagesStore;return{hiddenMessagesCount:e.firstVisibleMessageIndex,hasMessagesToRestore:e.hasMessagesToRestore,clearMessages:e.hideAllMessages,restoreMessages:e.restoreAllMessages}},Es=(0,v.observer)((()=>{const{hiddenMessagesCount:e,restoreMessages:t}=Ns();return(0,me.jsxs)("div",{className:"websocket-hidden-messages",children:[(0,me.jsxs)("div",{className:"websocket-hidden-messages__left-section",children:[(0,me.jsx)(Is.Z,{color:"content-color-primary",className:"websocket-hidden-messages__left-section__icon"}),(0,me.jsx)(Zt.ZP,{type:"body-medium",color:"content-color-primary",children:`${e} messages hidden`})]}),(0,me.jsx)("div",{className:"websocket-hidden-messages__right-section",children:(0,me.jsx)(Ee.Z,{type:"secondary",text:"Restore",size:"small",onClick:t})})]})}));Es.displayName="observer(WebSocketHiddenMessagesItem)";const Rs=Es;var As=s(95897),Os=s.n(As);const Zs=()=>{const e=ge().messagesStore;return{isMessageSelected:e.isMessageSelected,toggleMessageSelected:e.toggleMessageSelected,deselectAllMessages:e.deselectAllMessages,selectedMessagesCount:e.selectedMessagesCount,selectedMessageDetailsList:e.selectedMessageDetailsList}},_s=(0,v.observer)((()=>{const{selectedMessageDetailsList:e,deselectAllMessages:t}=Zs(),s=(0,r.useMemo)((()=>{var t,s;if(e.length!==k.rr)return"Not available";const[r,a]=e,n=null==r||null==(t=r.meta)?void 0:t.time,i=null==a||null==(s=a.meta)?void 0:s.time;return n&&i?Os()(Math.abs(new Date(n).getTime()-new Date(i).getTime())):"Not available"}),[e]);return(0,me.jsxs)("div",{className:"message-relational-info-toolbar",children:[(0,me.jsx)(Ee.Z,{type:"muted-plain",text:"Deselect",onClick:t,className:"message-relational-info-toolbar__deselect"}),(0,me.jsx)(Zt.ZP,{type:"body-medium",color:"content-color-primary",children:`Time difference: ${s}`})]})}));_s.displayName="observer(WebSocketMessageStreamProjectionArea)";const Ps=_s;var Hs=s(37110),Ds=s(20347),qs=s(43088);const Ls=()=>{const e=ge().messagesStore;return{isFilterApplied:e.isFilterApplied,filteredMessages:e.filteredMessagesByInputAndType}};let zs,Us,Fs,Bs,Ws,Gs=e=>e;const $s=i()(l.Z)(zs||(zs=Gs`
  padding: var(--spacing-xs) var(--spacing-s);
  z-index: 1;
`)),Js=i()(l.Z)(Us||(Us=Gs`
  width: 240px;
  min-width: 100px;
`)),Xs=i().div(Fs||(Fs=Gs`
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--spacing-s);
  height: var(--controls-size-default);
`)),Vs=i()(l.Z)(Bs||(Bs=Gs`
  margin-left: auto;
`)),Ks=i()(l.Z)(Ws||(Ws=Gs`
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: var(--size-xs);
  min-width: var(--size-xs);

  background-color: ${0};
`),(e=>e.background&&`var(--${e.background})`)),Ys=(0,v.observer)((e=>{const{messageTypeFilter:t,setMessageTypeFilter:s}=(()=>{const e=ge().messagesStore;return{messageTypeFilter:e.messageTypeFilter,setMessageTypeFilter:e.setMessageTypeFilter.bind(e)}})(),{messageInputFilter:r,setMessageInputFilter:a}=(()=>{const e=ge().messagesStore;return{messageInputFilter:e.messageInputFilter,setMessageInputFilter:e.setMessageInputFilter.bind(e)}})(),{hasMessagesToRestore:n,clearMessages:i}=Ns(),{filteredMessages:o}=Ls(),c=e=>{const t=k.Re[e]||!1;if(!t)return;const{Icon:s,color:r,size:a,backgroundColor:n}=t;return(0,me.jsx)(Ks,{background:n,children:(0,me.jsx)(s,{color:r,size:a})})};return(0,me.jsxs)($s,{alignItems:"center",children:[(0,me.jsxs)(l.Z,{wrap:"wrap",rowGap:"spacing-s",gap:"spacing-s",children:[(0,me.jsx)(Js,{alignItems:"center",children:(0,me.jsx)(cs.Z,{type:"search",placeholder:"Search",value:r,onChange:e=>{var t;return a(null==e||null==(t=e.target)?void 0:t.value)},onClear:()=>a(""),label:(0,me.jsx)(Hs.Z,{text:"Search",isHidden:!0})})}),(0,me.jsxs)(Oe.Z,{children:[(0,me.jsx)(Ze.Z,{type:"tertiary",text:(0,me.jsxs)(l.Z,{gap:"spacing-xs",alignItems:"center",children:[c(e.model.messageTypeFilter),(0,me.jsx)(Zt.ZP,{children:k.I0[t]})]})}),(0,me.jsx)(_e.Z,{children:Object.entries(k.I0).map((e=>{const t=e[0],r=e[1];return"addSeparator"===t?(0,me.jsx)(Ds.Z,{}):(0,me.jsx)(Pe.Z,{onClick:()=>{s(t)},children:(0,me.jsxs)(Xs,{children:[c(t),r]})},t)}))})]}),(0,me.jsx)(Ee.Z,{type:"tertiary",icon:(0,me.jsx)(qs.Z,{}),size:"medium",text:"Clear Messages",tooltip:"Clear Messages",onClick:i,isDisabled:Z(o)&&n})]}),(0,me.jsx)(Vs,{alignItems:"center",wrap:"wrap",children:e.children})]})}));Ys.displayName="observer(WebSocketMessageStreamControls)";const Qs=Ys,er=(0,v.observer)((e=>{const{model:t,children:s}=e,{selectedMessagesCount:r}=Zs();return r===k.rr?(0,me.jsx)(Ps,{model:t}):(0,me.jsx)(Qs,{model:t,children:s})}));er.displayName="observer(WebSocketMessageStreamToolbar)";const tr=er;let sr;const rr=i().div(sr||(sr=(e=>e)`
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100%;
  width: 100%;
  overflow: hidden;
`)),ar=e=>(0,me.jsx)(rr,{children:(0,me.jsx)(bt.Z,{title:e.title,description:e.description,children:(0,me.jsx)(xt.Z,{name:e.illustration})})}),nr=(0,ws.observer)((e=>e.model.messageStreamNotificationType?(0,me.jsx)("div",{className:"websocket-stream__jump-to-latest",children:(0,me.jsx)(Ee.Z,{type:"tertiary",size:"small",text:e.model.messageStreamNotificationType===k.tg?"New messages":"Jump to latest",icon:(0,me.jsx)(js.Z,{}),className:"websocket-stream__jump-to-latest__btn",onClick:e.handleJumpToLatest})}):null));nr.displayName="observer(Notification)";class ir extends r.Component{constructor(e){super(e),this.state={retryCount:0},this.getItemSize=this.getItemSize.bind(this),this.getListItem=this.getListItem.bind(this),this.onItemsRendered=this.onItemsRendered.bind(this),this.handleJumpToLatest=this.handleJumpToLatest.bind(this)}componentDidMount(){this.newMessageNotificationReactionDisposer=(0,b.reaction)((()=>{var e;return null==(e=this.props.model.newMessages)?void 0:e.length}),(e=>{if(0===e)return this.props.model.set("messageStreamNotificationType",null);this.props.model.set("messageStreamNotificationType",k.tg)}))}componentWillUnmount(){this.newMessageNotificationReactionDisposer&&this.newMessageNotificationReactionDisposer()}onItemsRendered({visibleStartIndex:e}){var t;e<10||null!=(t=this.props.model.newMessages)&&t.length||this.props.model.set("messageStreamNotificationType",k.NI)}get emptyState(){return{error:{title:{text:"Couldnâ€™t load your messages."},message:{text:this.state.retryCount<3?"Just a faulty wire. Please try again.":"We are unable to load your messages due to unforeseen circumstances. Please try again later.",className:"stream-empty-state__message"},illustration:"illustration-unable-to-load",secondaryAction:(this.state.retryCount,{})},empty:{title:{text:"No messages yet"},message:{text:"Establish a connection to send and receive messages.",className:"stream-empty-state__message"},illustration:"illustration-connect-to-server"},truncated:{title:{text:"Response size is too large to display"},message:{text:"Could not save the response in the history because it was too large.",className:"stream-empty-state__message"},illustration:"illustration-unable-to-pull-request"}}}getMessageIndex(e){var t;return(null==(t=this.props.model.visibleItems)?void 0:t.length)-(e+1)}getItemSize(e){var t;const{id:s,type:r,payload:a}=(null==(t=this.props.model)?void 0:t.visibleItems[this.getMessageIndex(e)])||{};return this.props.isMessageExpanded(s)?r===k.Ax.ERROR||r===k.Ax.CONNECTED?a&&E(a.handshakeDetails)?73:281:r===k.Ax.DISCONNECTED?73:291:41}getListItem(e){var t;const s=null==(t=this.props.model)||null==(t=t.visibleItems)?void 0:t[this.getMessageIndex(e.index)];return s?s.type===k.Ax.HIDDEN?(0,me.jsx)("div",{style:e.style,children:(0,me.jsx)(Rs,{model:this.props.model})}):(0,me.jsx)("div",{style:e.style,children:this.props.renderListItem(e.index,s)}):null}getList(){const e=e=>(0,me.jsx)(ws.Observer,{children:this.getListItem.bind(this,e)});return(0,me.jsx)("div",{className:"websocket-stream__list",children:(0,me.jsx)(Cs(),{children:({height:t,width:s})=>(0,me.jsx)(ws.Observer,{children:()=>{var r;return(0,me.jsx)(Ss.VariableSizeList,{height:t,width:s,itemSize:this.getItemSize,itemCount:null==(r=this.props.model.visibleItems)?void 0:r.length,overscanCount:5,ref:e=>{this.listRef=e},onItemsRendered:this.onItemsRendered,children:e})}})})})}handleResetHeight(e){!Z(this.listRef)&&this.listRef.resetAfterIndex(e)}handleJumpToLatest(e){e&&e.stopPropagation(),!Z(this.listRef)&&this.listRef.scrollToItem(0)}renderContent(){return this.props.isFilterApplied&&Z(this.props.filteredMessages)?(0,me.jsx)(ar,{title:"No messages found",description:"Try again using a different keyword or filter.",illustration:"illustration-no-report"}):(0,me.jsxs)(r.Fragment,{children:[(0,me.jsx)(nr,{model:this.props.model,handleJumpToLatest:this.handleJumpToLatest}),this.getList()]})}render(){if(this.props.model.messageStreamStatus===k.Ui.Loading)return(0,me.jsx)(Re.Z,{className:"websocket-stream-loader"});let e;switch(this.props.model.messageStreamStatus){case k.Ui.Error:e="error";break;case k.Ui.Empty:e="empty";break;case k.Ui.Truncated:e="truncated"}if(e&&this.emptyState[e]){const{title:t,message:s,illustration:r}=this.emptyState[e];return(0,me.jsx)(ar,{title:null==t?void 0:t.text,description:null==s?void 0:s.text,illustration:r})}return(0,me.jsxs)("div",{className:ks()("websocket-stream",this.props.className),children:[(0,me.jsx)(tr,{model:this.props.model,ref:e=>{this.toolbarRef=e},children:this.props.toolbarExtras}),this.renderContent()]})}}var or=s(42827),lr=s.n(or),cr=s(74962),dr=s(81397),ur=s(65848),mr=s(24867),pr=s(25710),hr=s(56415),gr=s(45261),yr=s(30923),vr=s(83125),br=s(32054);const xr=(0,r.lazy)((()=>s.e(1544).then(s.t.bind(s,31544,23))));function fr(e){var t,s,a;const[n,i]=(0,r.useState)(null==(t=e.initialState)?void 0:t.activeLanguage),[o,l]=(0,r.useState)(null==(s=e.initialState)?void 0:s.hexMode),[c,d]=(0,r.useState)(null==(a=e.initialState)?void 0:a.lineWrap),u=(0,r.useRef)(null),m=e=>{i(e),l(!1)},p=()=>{var e;u.current&&(null==(e=u.current)||e.prettify())},h=()=>{d((e=>!e))},g=()=>{var e;u.current&&(null==(e=u.current)||e.toggleFindWidget())},y=()=>{l((e=>!e))},{message:v,viewer:b}=function(e,t,s){let r,a;return k.hD[k.Bg].has(t.split("/")[0].toLowerCase())?(a=k.Bg,r=e):k.hD[k.Uw].has(t)?(a=k.Uw,r=s?(0,N.hexy)(e,R):e):(a=k.Uw,e instanceof ArrayBuffer&&(e=new Uint8Array(e)),r=s?(0,N.hexy)([...e],R):String.fromCodePoint(...e)),{message:r,viewer:a}}(e.message,e.mimeType,o);return b===k.Bg?null:((e,{autoFormat:t})=>{let s=n;return o?s=k.wr.HEXDUMP:E(n)&&(s=k.wr.TEXT),(0,me.jsxs)("div",{className:"websocket-message-viewer__editor",children:[(0,me.jsxs)("div",{className:ks()({"websocket-message-viewer__editor__toolbar":!0,"is-binary":null===n}),children:[!E(n)&&(0,me.jsxs)("div",{className:"websocket-message-viewer__editor__toolbar__section-l",children:[(0,me.jsx)(De,{onChange:m,activeLanguage:n}),(0,me.jsx)(Ee.Z,{onClick:h,type:"tertiary",icon:(0,me.jsx)(vr.Z,{}),tooltip:"Wrap Line",className:ks()({"line-wrap-active":c}),isDisabled:o}),!t&&(0,me.jsx)(Ee.Z,{onClick:p,type:"tertiary",icon:(0,me.jsx)(Ae.Z,{}),tooltip:"Beautify",isDisabled:o})]}),(0,me.jsxs)("div",{className:"websocket-message-viewer__editor__toolbar__section-r",children:[(0,me.jsx)(Ee.Z,{onClick:y,type:"tertiary",text:o?"Show Message":"Show Hexdump"}),(0,me.jsx)(Ee.Z,{onClick:g,type:"tertiary",icon:(0,me.jsx)(br.Z,{}),tooltip:"Search"})]})]}),(0,me.jsx)("div",{className:"websocket-message-viewer__editor__monaco-editor",children:(0,me.jsx)(r.Suspense,{fallback:(0,me.jsx)(Re.Z,{}),children:(0,me.jsx)(xr,{autoFormat:t,value:e,fontSize:12,language:s,wordWrap:c,readOnly:!0,ref:u,showNonPrintableCharacters:!0})})})]})})(v,{autoFormat:!0})}var wr=s(37155);const Sr=s.n(wr)()((async e=>{if(e){const e=await navigator.permissions.query({name:"clipboard-write"});return"granted"===e.state||"prompt"===e.state}return!1})),Tr=()=>{const e=ge().messagesStore;return{isMessageExpanded:e.isMessageExpanded.bind(e),toggleMessageExpanded:e.toggleMessageExpanded.bind(e)}};let kr;const jr=(0,r.lazy)((()=>s.e(6954).then(s.t.bind(s,26954,23)).then((e=>({default:e.CustomObjectInspector}))))),Mr=i()(mr.Z)(kr||(kr=(e=>e)`
  padding: var(--spacing-s);
`)),Cr=(0,v.observer)((e=>{var t,s,n;const[i,o]=(0,r.useState)(!1),[l,d]=(0,r.useState)(!1),u=(0,r.useRef)(),{addToast:m}=(0,c.ZP)(),{isMessageExpanded:p,toggleMessageExpanded:h}=Tr(),{isMessageSelected:g,toggleMessageSelected:y,selectedMessagesCount:v}=Zs(),b=g(null==(t=e.message)?void 0:t.id),x=a().useRef();(0,r.useEffect)((()=>{var t;const s=u.current;null==(t=e.message)||null==(t=t.meta)||null==(t=t.preview)||!t.truncated||!s||s.clientWidth<s.scrollWidth||d(!0)}),[]);const f=e=>(e===k.Ax.OUTGOING||e===k.Ax.INCOMING)&&(i||b||v>0),w=()=>{var t;E(null==(t=e.message)?void 0:t.payload)||(h(e.message.id),e.handleResetHeight(e.index))},S=async()=>{var t;const s=null==(t=e.message)?void 0:t.payload;try{await(async e=>{e&&await Sr(!0)&&await navigator.clipboard.writeText(e)})(s),m({title:"Copied to clipboard",status:"success",description:null})}catch(e){if(m({title:"Unable to copy",status:"failed",description:null}),e instanceof Error)return(0,yr.logError)(e,{stack:e.stack,appId:"ws-workbench",errorElementId:"handle-copy-message"})}},j=(t,s={},r)=>{var a;const{time:n,size:o,mimeType:l}=s,c=function(e){const t=e?new Date(e):new Date;return(0,T.format)(t,"HH:mm:ss")}(n);let d=null;E(null==(a=e.message)?void 0:a.payload)||(d=e.cachedExpandedState?(0,me.jsx)(pr.Z,{size:"large",color:"content-color-primary"}):(0,me.jsx)(hr.Z,{size:"large",color:"content-color-primary"}));let u=null;const m=c?(0,me.jsx)("div",{className:"websocket-stream-item__header__right-section__time",children:(0,me.jsx)(Zt.ZP,{type:"body-medium",color:"content-color-secondary",children:c})}):null;if(!i||t!==k.Ax.OUTGOING&&t!==k.Ax.INCOMING)u=m;else{var p;const t=!k.gY.has(l)||E(null==(p=e.message)?void 0:p.payload)||!r;u=(0,me.jsxs)(me.Fragment,{children:[(0,me.jsxs)("div",{className:"websocket-stream-item__header__right-section__quick-actions",onClick:e=>e.stopPropagation(),children:[(0,me.jsx)(Ee.Z,{onClick:S,type:"tertiary",icon:(0,me.jsx)(gr.Z,{}),isDisabled:t,tooltip:(0,me.jsx)(dr.Z,{content:t?"Can't copy this message":"Copy message",placement:"bottom"}),"data-testid":"copy-message-button"}),(0,me.jsx)("div",{"data-testid":"message-info-icon",children:(0,me.jsx)(Mr,{color:"content-color-secondary",ref:x})}),(0,me.jsx)(dr.Z,{triggerRef:x,content:(0,me.jsxs)("div",{className:"websocket-stream-info-tooltip",children:[(0,me.jsx)(Zt.ZP,{type:"body-medium",color:"content-color-primary",children:`Size: ${lr()(o)}`}),(0,me.jsx)(Zt.ZP,{type:"body-medium",color:"content-color-primary",children:`Time: ${c}`}),(0,me.jsx)(Zt.ZP,{type:"body-medium",color:"content-color-primary",children:`MIME Type: ${l}`})]}),placement:"bottom-start"})]}),m]})}return(0,me.jsxs)("div",{className:"websocket-stream-item__header__right-section",children:[u,d]})};return(0,me.jsxs)("div",{className:(M=null==(s=e.message)?void 0:s.type,ks()({"websocket-stream-item":!0,"server-message":M===k.Ax.INCOMING,"client-message":M===k.Ax.OUTGOING,"no-body":E(null==(C=e.message)?void 0:C.payload)})),"data-testid":"websocket-response-message",children:[(()=>{const{type:t,meta:s,payload:r}=e.message||{},a=k.Re[t]||k.Re.default||{},n="function"==typeof a?a((null==r?void 0:r.code)===k.aS):a,{Icon:c,color:d,size:m}=n||{};let p;var h;return s&&(p="string"==typeof s.preview?s.preview:null==(h=s.preview)?void 0:h.text),(0,me.jsxs)("div",{className:ks()({"websocket-stream-item__header":!0,"is-hovered":i,"is-selected":e.isSelected}),onClick:w,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:[(0,me.jsxs)("div",{className:"websocket-stream-item__header__left-section",ref:u,children:[f(t)&&(0,me.jsx)("div",{className:"websocket-stream-item__header__left-section__checkbox",onClick:e=>null==e?void 0:e.stopPropagation(),children:(0,me.jsx)(ur.Z,{isChecked:b,onChange:()=>{var t;return y(null==(t=e.message)?void 0:t.id)},isDisabled:!b&&v===k.rr,"data-testid":"message-select-checkbox"})}),c&&d&&(0,me.jsx)("div",{className:"websocket-stream-item__header__left-section__type-icon",children:(0,me.jsx)(c,{color:d,size:m})}),(0,me.jsx)(Zt.ZP,{type:"body-medium",className:ks()({"websocket-stream-item__header__left-section__message":!0,"add-ellipsis":l}),color:s.preview.placeholder?"content-color-secondary":"content-color-primary",children:p})]}),j(t,s,r)]})})(),p(null==(n=e.message)?void 0:n.id)&&(()=>{var t;const{type:s,meta:a,payload:n}=e.message||{};if(E(null==(t=e.message)?void 0:t.payload))return null;let i;switch(s){case k.Ax.OUTGOING:case k.Ax.INCOMING:{const e=k.OX[a.mimeType],t={activeLanguage:e||k.wr.TEXT,lineWrap:!1,hexMode:!1};e===k.wr.HEXDUMP&&Object.assign(t,{activeLanguage:null,hexMode:!0}),i=(0,me.jsx)("div",{className:"websocket-stream-item__body__message-body-viewer",children:(0,me.jsx)(fr,{message:n,mimeType:a.mimeType,initialState:t})});break}case k.Ax.CONNECTED:case k.Ax.ERROR:i=(({error:e,handshakeDetails:t})=>(0,me.jsxs)("div",{className:ks()({"websocket-stream-item__body__obj-inspector":!0,"no-details":E(t)}),children:[e&&(0,me.jsxs)("div",{className:"websocket-stream-item__body__obj-inspector__error",children:[(0,me.jsx)(Zt.ZP,{type:"strong",children:"Error:"}),(0,me.jsx)("span",{children:" "}),(0,me.jsx)(Zt.ZP,{type:"body-medium",color:"content-color-primary",children:e})]}),t&&(0,me.jsxs)(me.Fragment,{children:[(0,me.jsx)(cr.Z,{type:"h6",text:"Handshake Details",color:"content-color-secondary"}),(0,me.jsx)(r.Suspense,{fallback:(0,me.jsx)(me.Fragment,{children:" "}),children:(0,me.jsx)(jr,{data:t})})]})]}))(n);break;default:i=(e=>{const{code:t,name:s,description:r}=e||{};return(0,me.jsxs)("div",{className:"websocket-stream-item__body__plain-text",title:r,children:[(0,me.jsx)(Zt.ZP,{type:"strong",children:`${t} ${s}:`}),(0,me.jsx)("span",{children:" "}),(0,me.jsx)(Zt.ZP,{type:"body-medium",color:"content-color-secondary",className:"websocket-stream-item__body__plain-text__description",children:r})]})})(n)}return(0,me.jsx)("div",{className:"websocket-stream-item__body",children:i})})()]});var M,C}));Cr.displayName="observer(RawWebSocketMessageStreamItem)";const Ir=Cr,Nr=(0,v.observer)((e=>{const{streamStatus:t,setStreamStatus:s}=(()=>{const e=ge().messagesStore;return{streamStatus:e.streamStatus,setStreamStatus:e.setStreamStatus.bind(e)}})(),{isMessageExpanded:a}=Tr(),{isFilterApplied:n,filteredMessages:i}=Ls(),o=(0,r.useRef)(null),l={visibleItems:e.messages,messageStreamStatus:t,setStreamStatus:s,set:()=>{}};return(0,r.useEffect)((()=>{var e;null==(e=o.current)||e.handleResetHeight(0)}),[e.messages.length]),(0,me.jsx)(ir,{ref:o,model:l,renderListItem:(e,t)=>(0,me.jsx)(Ir,{index:e,message:t,handleResetHeight:e=>{var t;null==(t=o.current)||t.handleResetHeight(e)}},t.id),isMessageExpanded:a,isFilterApplied:n,filteredMessages:i})}));Nr.displayName="observer(RawWebSocketMessageStream)";let Er,Rr,Ar,Or,Zr,_r,Pr,Hr,Dr,qr,Lr=e=>e;const zr=i()(l.Z)(Er||(Er=Lr`
  flex: 1;
  height: var(--size-m);
  margin: var(--spacing-zero) var(--spacing-s) var(--spacing-zero)
    var(--spacing-s);
`)),Ur=i().div(Rr||(Rr=Lr`
  cursor: pointer;
  user-select: none;
`)),Fr=i().div(Ar||(Ar=Lr`
  display: flex;
  margin-left: var(--spacing-l);
  cursor: pointer;
`)),Br=i()(l.Z)(Or||(Or=Lr`
  cursor: default;
`)),Wr=i().div(Zr||(Zr=Lr`
  width: 240px;
`)),Gr=i().div(_r||(_r=Lr`
  display: flex;
  align-items: center;
  justify-content: space-between;
  height: var(--size-s);
  margin-top: var(--spacing-xs);

  &:first-child {
    margin-top: unset;
  }
`)),$r=i()(cr.Z)(Pr||(Pr=Lr`
  color: var(--content-color-secondary);
`)),Jr=i().div(Hr||(Hr=Lr`
  width: 60%;
  display: flex;
  color: var(--content-color-primary);

  span {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }
`)),Xr=i().div(Dr||(Dr=Lr`
  display: flex;
  align-items: center;
  gap: var(--spacing-s);
`)),Vr=i().div(qr||(qr=Lr`
  display: inline-flex;
  width: 8px;
  height: 8px;
  margin-left: var(--spacing-xs);
  background-color: ${0};
  border-radius: 8px;
`),(({status:e})=>{switch(e){case"success":return"var(--base-color-success)";case"info":return"var(--base-color-warning)";case"critical":return"var(--base-color-error)";default:return"inherit"}})),Kr=e=>{const{label:t,value:s}=e;return t&&s?(0,me.jsxs)(Gr,{children:[(0,me.jsx)(Zt.ZP,{type:"body-medium",color:"content-color-secondary",children:t}),(0,me.jsx)(Jr,{title:s,children:(0,me.jsx)(Zt.ZP,{type:"body-medium",color:"content-color-primary",children:s})})]}):null},Yr=e=>{if(!e.section)return null;const{section:t,dataFields:s}=e.section;return(0,me.jsxs)(Wr,{children:[t&&(0,me.jsx)(Gr,{children:(0,me.jsx)($r,{type:"h5",color:"content-color-secondary",text:t})}),s.map((({key:t,label:s})=>{var r;const a=null==(r=e.statistics)?void 0:r[t];return(0,me.jsx)(Kr,{label:s,value:a},t)}))]})},Qr=(0,v.observer)((e=>{const[t,s]=(0,r.useState)(!1),a=(0,r.useRef)(null),n=qe(),i=ge().connectionStatistics,{label:o,type:c}=k.D6[n]||{};return(0,me.jsxs)(zr,{alignItems:"center",justifyContent:"space-between","data-testid":"response-pane-header",children:[(0,me.jsx)(Ur,{onClick:e.onClick,children:(0,me.jsx)(cr.Z,{type:"h5",text:e.label,color:"content-color-primary"})}),(0,me.jsxs)(l.Z,{alignItems:"center",children:[o&&c&&(0,me.jsxs)(me.Fragment,{children:[(0,me.jsx)(Br,{alignItems:"center",gap:"spacing-xs",children:(0,me.jsxs)(Xr,{onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),ref:a,children:[(0,me.jsx)(Vr,{status:c}),(0,me.jsx)(Zt.ZP,{children:o})]})}),!Z(i)&&(0,me.jsx)(qt.ZP,{placement:"bottom",triggerRef:a,isOpen:t,children:(0,me.jsx)(Yr,{section:k.up,statistics:i})})]}),(0,me.jsx)(Fr,{onClick:e.onClick,children:(()=>{const t=e.isPaneCollapsed?pr.Z:hr.Z;return(0,me.jsx)(t,{color:"content-color-tertiary"})})()})]})]})})),ea=e=>{const[t,s]=a().useState(!1);return(0,me.jsx)(u.PaneHeader,{defaultLayout:"horizontal",horizontalComponent:(0,me.jsx)(Qr,{label:"Response",onClick:()=>{s((e=>!e)),e.handlePaneCollapseToggle()},layout:"horizontal",isPaneCollapsed:t}),verticalComponent:(0,me.jsx)(u.PaneLabel,{layout:"vertical",label:(0,me.jsx)(Zt.ZP,{type:"body-medium",color:"content-color-secondary",children:"Response"}),arrowDirection:"left"})})},ta=(0,v.observer)((()=>{const e=ge().messagesStore.messagesToShow;return(0,me.jsx)(Nr,{messages:e})}));ta.displayName="observer(ResponsePaneContent)";const sa={default:200,collapsed:33,uncollapsed:400,min:100,resizableByDefault:!0},ra=(0,d.Z)({},sa,{uncollapsed:200}),aa={default:400,collapsed:33,uncollapsed:400,min:300,resizableByDefault:!0},na=()=>{const e=a().useRef(null);return(0,me.jsxs)(me.Fragment,{children:[(0,me.jsx)(ls,{}),(0,me.jsx)(fs,{}),(0,me.jsxs)(u.PaneGroup,{defaultLayout:"vertical",scrollToResize:!0,children:[(0,me.jsxs)(u.Pane,{height:sa,width:aa,resizableByDefault:!0,children:[(0,me.jsx)(Et,{}),(0,me.jsx)(Rt,{})]}),(0,me.jsxs)(u.Pane,{height:ra,width:aa,resizableByDefault:!0,ref:e,children:[(0,me.jsx)(ea,{handlePaneCollapseToggle:()=>{var t;null==(t=e.current)||t.handleCollapseToggle("y")}}),(0,me.jsx)(ta,{})]})]})]})},ia=()=>(0,me.jsx)(St,{description:"Support for Socket.IO request is coming soon"});let oa;const la=i()(l.Z)(oa||(oa=(e=>e)`
  height: 100vh;
  width: 100vw;
  min-width: 600px;
  max-width: 100%;
  background-color: var(--background-color-primary);
  color: var(--content-color-primary);
`)),ca=()=>{var e;const t="ws-socketio-request"===(null==(e=(0,o.useMatch)("/workspace/:workspaceId/:protocol/create"))||null==(e=e.params)?void 0:e.protocol)?ia:na,{historyId:s}=(0,o.useParams)();return(0,r.useEffect)((()=>{s&&V.AnalyticsService.addEventV2({category:"ws-raw",action:"open-tab",label:"history",value:1})}),[]),(0,me.jsx)(he,{children:(0,me.jsx)(c.VW,{children:(0,me.jsx)(la,{direction:"column",children:(0,me.jsx)(t,{})})})})}}}]);
//# sourceMappingURL=7535.fc630fccd8e4d01a.js.map