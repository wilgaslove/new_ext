
        import path from 'path';
        import { fileURLToPath } from 'url';
        import { createRequire as topLevelCreateRequire } from 'module';
        const require = topLevelCreateRequire(import.meta.url);
        const __filename = fileURLToPath(import.meta.url);
        const __dirname = path.dirname(__filename);
        
var re=(h=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(h,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):h)(function(h){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+h+'" is not supported')});import Ge from"ignore";import b from"chalk";import Se from"find-config";import W from"fs";import Ze from"glob";import _ from"lodash";import B from"path";import m from"process";import Ce from"util";var O=class extends Error{};import{sortClasses as ne}from"@shufo/tailwindcss-class-sorter";import Ne from"aigle";import v from"detect-indent";import{sortAttributes as Pe}from"html-attribute-sorter";import E from"js-beautify";import i from"lodash";import*as Xe from"vscode-textmate";import Je from"xregexp";function Ie(h){return h.split(`
`)}function Re(h){return h.trim().startsWith("*")}function Ee(h){return h.length>1}function De(h){return` ${h}`}function ie(h){let e=Ie(h);if(!Ee(e))return h;let t=!1;return e.map((r,s)=>{if(s===0||t)return r;if(!Re(r))return t=!0,r;let a=r.trim();return De(a)}).join(`
`)}var Le={defaultPrintWidth:120},K=Le;import H from"lodash";var A="@",P=["@alert","@pushonce","@push","@slot","@switch","@unless","@verbatim","@prependonce","@prepend","@once","@error","@empty","@guest","@isset","@permission","@permissions","@canany","@cannot","@can","@role","@hasrole","@hasanyrole","@hasallroles","@unlessrole","@hasexactroles","@if","@production","@env","@while","@auth","@forelse","@for","@foreach","@php","@component","@section","@customdirective"],se=H.map(P,h=>h.substring(1)),I=["@endalert","@endpushonce","@endpush","@endslot","@endswitch","@endunless","@endverbatim","@show","@stop","@endprependonce","@endprepend","@endonce","@enderror","@append","@overwrite","@endempty","@endguest","@endisset","@endpermission","@endpermissions","@endcanany","@endcannot","@endcan","@endrole","@endhasrole","@endhasanyrole","@endhasallroles","@endunlessrole","@endhasexactroles","@endif","@endproduction","@endenv","@endwhile","@endauth","@endforelse","@endforeach","@endfor","@endphp","@endcomponent","@endsection","@endcustomdirective"],R=["@elseenv","@elseif","@elsecanany","@elsecannot","@elsecan","@else","@elsecustomdirective"],Q={"@section":2,"@push":2,"@prepend":2,"@slot":2},ae=["@forelse","@if"],G=["@empty"],oe=["@default"],k=["@forelse","@if","@for","@foreach","@while","@sectionmissing","@case"],z=["@endforelse","@endif","@endforeach","@endfor","@endwhile","@break"],Z=["@button","@class","@include","@disabled","@checked","@json"],F=["@set","@json","@selected","@checked","@disabled","@php","@include","@includeif","@includewhen","@includeunless","@includefirst","@button","@class","@props","@aware"],le=["@if","@while","@case","@isset","@empty","@elseif","@component","@hassection","@unless"],N=["@hassection"],X=["@charset","@color-profile","@counter-style","@font-face","@font-feature-values","@import","@keyframes","@media","@namespace","@page","@property","@supports"];function ce(h,e){return H.filter(h.tokens,t=>{let n=e.substring(t.startIndex,t.endIndex).trim();return H.includes(P,n)||H.includes(I,n)}).length>=2}var y="\\(((?:[^)(]+|\\((?:[^)(]+|\\((?:[^)(]+|\\((?:[^)(]+|\\([^)(]*\\))*\\))*\\))*\\))*)\\)?";import Ae from"lodash";function he(h){let e=["@unless"];return Ae.replace(h,new RegExp(`(?<!@)(${e.join("|")})\\s*${y}`,"gi"),(t,n,r)=>`${n} (${r})`)}import x from"lodash";import ke from"fs";import Fe from"os";import q from"chalk";import Y from"prettier/standalone.js";import ee from"@prettier/plugin-php/standalone.js";import ft from"detect-indent";var f=h=>{let e={get(){return null}};return x.isUndefined(h)||x.isNull(h)?e:h};async function J(h){return new Promise((e,t)=>{ke.readFile(h,(n,r)=>n?t(n):e(r))})}function j(h){return h?h.split(/\r\n|\n|\r/):""}var L=1e3,pe={noPhpSyntaxCheck:!1,printWidth:L,trailingCommaPHP:!0,phpVersion:"8.1",noSingleQuote:!1};function D(h,e={}){let t={...pe,...e};try{return Y.format(h.replace(/\n$/,""),{parser:"php",printWidth:1e3,singleQuote:!t.noSingleQuote,phpVersion:t.phpVersion,trailingCommaPHP:t.trailingCommaPHP,plugins:[ee]})}catch(n){if(t.noPhpSyntaxCheck===!1)throw n;return h}}function S(h,e={}){let t={...pe,...e};try{return Y.format(`<?php echo ${h} ?>`,{parser:"php",printWidth:t.printWidth,singleQuote:!t.noSingleQuote,phpVersion:t.phpVersion,trailingCommaPHP:t.trailingCommaPHP,plugins:[ee]}).replace(/<\?php echo (.*)?\?>/gs,(n,r)=>r.trim().replace(/;\s*$/,""))}catch(n){if(t.noPhpSyntaxCheck===!1)throw n;return h}}function de(h){let e=`<?php tmp_func${h}; ?>`,{ast:t}=Y.__debug.parse(e,{parser:"php",phpVersion:"8.0",plugins:[ee]});try{return t.children[0].expression.arguments.length||0}catch{return 0}}function ue(h){return Promise.all(x.map(h,async e=>{process.stdout.write(`path: ${q.bold(e.path)}:${e.line}
`),process.stdout.write(q.red(`--${e.original}
`)),process.stdout.write(q.green(`++${e.formatted}
`))}))}function ge(h,e,t){let n=x.map(e,(r,s)=>x.isEmpty(r)||r===t[s]?null:{path:h,line:s+1,original:r,formatted:t[s]});return x.without(n,null)}async function Te(h,e){let t=x.without(P,"@switch","@forelse","@php").join("|"),n=new RegExp(`(?!\\/\\*.*?\\*\\/)(${t})(\\s*?)${y}`,"gmi");return new Promise(r=>r(h)).then(r=>x.replace(r,n,(s,a,l,o)=>D(`<?php ${a.substr("1")}${l}(${o}) ?>`,e).replace(/<\?php\s(.*?)(\s*?)\((.*?)\);*\s\?>\n/gs,(c,d,p,u)=>`@${d.trim()}${p}(${u.trim()})`).replace(/([\n\s]*)->([\n\s]*)/gs,"->").replace(/,\)$/,")").replace(/(?:\n\s*)* as(?= (?:&{0,1}\$[\w]+|list|\[\$[\w]+))/g," as"))).then(r=>D(r,e))}async function me(h,e){return Te(h,e)}function fe(h){let e=x.without(k,"@case"),t=x.without(z,"@break");return new Promise(n=>n(h)).then(n=>{let r=new RegExp(`(${e.join("|")})([\\s]*?)${y}`,"gis");return x.replace(n,r,(s,a,l,o)=>`<beautifyTag start="${a}${l}" exp="^^^${x.escape(o)}^^^">`)}).then(n=>{let r=new RegExp(`(?!end=".*)(${t.join("|")})(?!.*")`,"gi");return x.replace(n,r,(s,a)=>`</beautifyTag end="${a}">`)})}function ye(h){return new Promise(e=>e(h)).then(e=>x.replace(e,/<beautifyTag.*?start="(.*?)".*?exp=".*?\^\^\^(.*?)\^\^\^.*?"\s*>/gs,(t,n,r)=>`${n}(${x.unescape(r)})`)).then(e=>x.replace(e,/<\/beautifyTag.*?end="(.*?)"\s*>/gs,(t,n)=>`${n}`))}var Oe=["/\\*\\* phptag_start \\*\\*/","/\\*\\* end_phptag \\*\\*/","/\\*escaped\\*/","__BLADE__;","/\\* blade_comment_start \\*/","/\\* blade_comment_end \\*/","/\\*\\*\\*script_placeholder\\*\\*\\*/","blade___non_native_scripts_","blade___scripts_","blade___html_tags_","beautifyTag","@customdirective","@elsecustomdirective","@endcustomdirective","x-slot --___\\d+___--"];function _e(h){if(new RegExp(Oe.join("|")).test(h))throw new Error(["Can't format blade: something goes wrong.","Please check if template is too complicated or not. Or simplify template might solves issue."].join(`
`));return h}function te(h){return h.replace(/\$/g,"$$$$")}function we(h){switch(h){case"LF":return`
`;case"CRLF":return`\r
`;default:return Fe.EOL}}import{promises as je}from"fs";import We from"lodash";import*as M from"vscode-oniguruma";import He from"path";var U=class{constructor(e,t){return(async()=>{var n;return this.vsctm=(n=e.default)!=null?n:e,this.oniguruma=t||(M==null?void 0:M.default)||M,await this.loadWasm(),this})()}async loadWasm(){var t;let e=await je.readFile(re.resolve("vscode-oniguruma/release/onig.wasm"));if(await((t=this.oniguruma)==null?void 0:t.loadWASM(e.buffer)),!this.initCalled){try{this.oniguruma.loadWASM(e.buffer)}catch{this.initCalled=!0}this.initCalled=!0}}createRegistry(){return this.registry=new this.vsctm.Registry({loadGrammar:e=>e==="text.html.php.blade"?J(He.resolve(__dirname,"../syntaxes/blade.tmLanguage.json")).then(t=>this.vsctm.parseRawGrammar(t.toString(),"./blade.tmLanguage.json")):null,onigLib:Promise.resolve({createOnigScanner:e=>new this.oniguruma.OnigScanner(e),createOnigString:e=>new this.oniguruma.OnigString(e)})}),this.registry}tokenizeLines(e,t){return We.map(e,n=>{var r;return t.tokenizeLine(n,(r=this.vsctm)==null?void 0:r.INITIAL)})}};var T=class{constructor(e){this.options={noPhpSyntaxCheck:!1,printWidth:e.wrapLineLength||K.defaultPrintWidth,...e},this.vsctm=f(this.options).vsctm||Xe,this.oniguruma=f(this.options).oniguruma,this.indentCharacter=f(this.options).useTabs?"	":" ",this.indentSize=f(this.options).indentSize||4,this.wrapLineLength=f(this.options).wrapLineLength||K.defaultPrintWidth,this.wrapAttributes=f(this.options).wrapAttributes||"auto",this.currentIndentLevel=0,this.shouldBeIndent=!1,this.isInsideCommentBlock=!1,this.stack=[],this.ignoredLines=[],this.curlyBracesWithJSs=[],this.rawBlocks=[],this.rawPhpTags=[],this.inlineDirectives=[],this.conditions=[],this.inlinePhpDirectives=[],this.rawPropsBlocks=[],this.bladeDirectives=[],this.bladeDirectivesInStyle=[],this.bladeComments=[],this.phpComments=[],this.bladeBraces=[],this.rawBladeBraces=[],this.nonnativeScripts=[],this.scripts=[],this.htmlAttributes=[],this.xData=[],this.xInit=[],this.htmlTags=[],this.templatingStrings=[],this.stringLiteralInPhp=[],this.shorthandBindings=[],this.componentAttributes=[],this.customDirectives=[],this.directivesInScript=[],this.unbalancedDirectives=[],this.escapedBladeDirectives=[],this.xSlot=[],this.result=[],this.diffs=[],this.defaultPhpFormatOption={noPhpSyntaxCheck:this.options.noPhpSyntaxCheck,printWidth:this.wrapLineLength},this.endOfLine=we(f(this.options).endOfLine)}formatContent(e){return new Promise(t=>t(e)).then(t=>this.preserveIgnoredLines(t)).then(t=>this.preserveNonnativeScripts(t)).then(t=>this.preserveCurlyBraceForJS(t)).then(t=>this.preserveRawPhpTags(t)).then(t=>this.preserveEscapedBladeDirective(t)).then(t=>me(t,this.options)).then(t=>this.preserveBladeComment(t)).then(t=>this.preserveBladeBrace(t)).then(t=>this.preserveRawBladeBrace(t)).then(t=>this.preserveConditions(t)).then(t=>this.preserveInlineDirective(t)).then(t=>this.preserveInlinePhpDirective(t)).then(t=>this.preserveBladeDirectivesInScripts(t)).then(t=>this.preserveBladeDirectivesInStyles(t)).then(t=>this.preserveCustomDirective(t)).then(t=>this.preserveUnbalancedDirective(t)).then(t=>this.breakLineBeforeAndAfterDirective(t)).then(async t=>(this.bladeDirectives=await this.formatPreservedBladeDirectives(this.bladeDirectives),t)).then(t=>this.preserveScripts(t)).then(t=>this.sortTailwindcssClasses(t)).then(t=>this.formatXInit(t)).then(t=>this.formatXData(t)).then(t=>this.preserveComponentAttribute(t)).then(t=>this.preserveShorthandBinding(t)).then(t=>this.sortHtmlAttributes(t)).then(t=>this.preservePhpBlock(t)).then(t=>this.preserveHtmlAttributes(t)).then(t=>this.preserveXslot(t)).then(t=>this.preserveHtmlTags(t)).then(t=>this.formatAsHtml(t)).then(t=>this.formatAsBlade(t)).then(t=>this.restoreHtmlTags(t)).then(t=>this.restoreXslot(t)).then(t=>this.restoreHtmlAttributes(t)).then(t=>this.restorePhpBlock(t)).then(t=>this.restoreShorthandBinding(t)).then(t=>this.restoreComponentAttribute(t)).then(t=>this.restoreXData(t)).then(t=>this.restoreXInit(t)).then(t=>this.restoreScripts(t)).then(t=>this.restoreUnbalancedDirective(t)).then(t=>this.restoreCustomDirective(t)).then(t=>this.restoreBladeDirectivesInStyles(t)).then(t=>this.restoreBladeDirectivesInScripts(t)).then(t=>this.restoreInlinePhpDirective(t)).then(t=>this.restoreInlineDirective(t)).then(t=>this.restoreConditions(t)).then(t=>this.restoreRawBladeBrace(t)).then(t=>this.restoreBladeBrace(t)).then(t=>this.restoreBladeComment(t)).then(t=>this.restoreEscapedBladeDirective(t)).then(t=>this.restoreRawPhpTags(t)).then(t=>this.restoreCurlyBraceForJS(t)).then(t=>this.restoreNonnativeScripts(t)).then(t=>this.restoreIgnoredLines(t)).then(t=>he(t)).then(t=>_e(t))}formatAsHtml(e){let t={indent_size:f(this.options).indentSize||4,wrap_line_length:f(this.options).wrapLineLength||120,wrap_attributes:f(this.options).wrapAttributes||"auto",wrap_attributes_min_attrs:f(this.options).wrapAttributesMinAttrs,indent_inner_html:f(this.options).indentInnerHtml||!1,end_with_newline:f(this.options).endWithNewline||!0,max_preserve_newlines:f(this.options).noMultipleEmptyLines?1:void 0,extra_liners:f(this.options).extraLiners,css:{end_with_newline:!1},eol:this.endOfLine},n=new Promise(r=>r(e)).then(r=>fe(r)).then(r=>E.html_beautify(r,t)).then(r=>ye(r));return Promise.resolve(n)}async sortTailwindcssClasses(e){return this.options.sortTailwindcssClasses?i.replace(e,/(?<=\s+(?!:)class\s*=\s*([\"\']))(.*?)(?=\1)/gis,(t,n,r)=>{if(i.isEmpty(r))return r;if(this.options.tailwindcssConfigPath){let s={tailwindConfigPath:this.options.tailwindcssConfigPath};return ne(r,s)}if(this.options.tailwindcssConfig){let s={tailwindConfig:this.options.tailwindcssConfig};return ne(r,s)}return ne(r)}):e}async preserveIgnoredLines(e){return i.chain(e).replace(/(^(?<!.+)^{{--\s*blade-formatter-disable\s*--}}.*?)([\r\n]*)$(?![\r\n])/gis,(t,n,r)=>this.storeIgnoredLines(`${n}${r.replace(/^\n/,"")}`)).replace(/(?:({{--\s*?blade-formatter-disable\s*?--}}|<!--\s*?prettier-ignore-start\s*?-->|{{--\s*?prettier-ignore-start\s*?--}})).*?(?:({{--\s*?blade-formatter-enable\s*?--}}|<!--\s*?prettier-ignore-end\s*?-->|{{--\s*?prettier-ignore-end\s*?--}}))/gis,t=>this.storeIgnoredLines(t)).replace(/(?:{{--\s*?blade-formatter-disable-next-line\s*?--}}|{{--\s*?prettier-ignore\s*?--}}|<!--\s*?prettier-ignore\s*?-->)[\r\n]+[^\r\n]+/gis,t=>this.storeIgnoredLines(t)).value()}async preserveCurlyBraceForJS(e){return i.replace(e,/@{{(.*?)}}/gs,(t,n)=>this.storeCurlyBraceForJS(n))}async preservePhpBlock(e){return this.preserveRawPhpBlock(e)}async preservePropsBlock(e){return i.replace(e,/@props\(((?:[^\\(\\)]|\([^\\(\\)]*\))*)\)/gs,(t,n)=>this.storeRawPropsBlock(n))}async preserveRawPhpBlock(e){return i.replace(e,/(?<!@)@php(.*?)@endphp/gs,(t,n)=>this.storeRawBlock(n))}async preserveHtmlTags(e){let t=["textarea","pre"];return i.replace(e,new RegExp(`<(${t.join("|")})\\s{0,1}.*?>.*?<\\/(${t.join("|")})>`,"gis"),n=>this.storeHtmlTag(n))}preserveCustomDirective(e){let t=[...i.without(P,"@unless"),...I,...R,"@unless\\(.*?\\)"].join("|"),n=i.chain([...i.without(P,"@unless","@for"),...I,...R,...F,...i.without(k,"@for"),"@unless[a-z]*\\(.*?\\)","@for\\(.*?\\)",...N,...X]).uniq().join("|").value(),r=new RegExp(`(?!(${n}))(@([a-zA-Z1-9_\\-]+))(?!.*?@end\\3)${y}.*?(?<!@end\\5)`,"gis"),s=new RegExp(`(?!(${t}))(@(unless)*([a-zA-Z1-9_\\-]+))(?!.*?\\2)(\\s|\\(.*?\\))+(.*?)(@end\\4)`,"gis"),a;return a=i.replace(e,r,l=>this.storeInlineCustomDirective(l)),a=i.replace(a,s,(l,o,c,d,p,u,g,$)=>{if(P.includes(c))return l;let w=l;return w=i.replace(w,new RegExp(`${c}(${y})*`,"gim"),C=>this.storeBeginCustomDirective(C)),w=i.replace(w,$,this.storeEndCustomDirective($)),w=i.replace(w,new RegExp(`@else${p}(${y})*`,"gim"),C=>this.storeElseCustomDirective(C)),w}),s.test(a)&&(a=this.preserveCustomDirective(a)),a}preserveInlineDirective(e){let t=new RegExp(`(<[\\w\\-\\_]+?[^>]*?)${A}(${se.join("|")})(\\s*?)?(\\([^)]*?\\))?((?:(?!@end\\2).)+)(@end\\2|@endif)(.*?/*>)`,"gims"),n=i.replace(e,t,(r,s,a,l,o,c,d,p)=>l===void 0&&o===void 0?`${s}${this.storeInlineDirective(`${A}${a.trim()}${c.trim()} ${d.trim()}`)}${p}`:l===void 0?`${s}${this.storeInlineDirective(`${A}${a.trim()}${o.trim()}${c}${d.trim()}`)}${p}`:o===void 0?`${s}${this.storeInlineDirective(`${A}${a.trim()}${l}${c.trim()} ${d.trim()}`)}${p}`:`${s}${this.storeInlineDirective(`${A}${a.trim()}${l}${o.trim()} ${c.trim()} ${d.trim()}`)}${p}`);return t.test(n)?this.preserveInlineDirective(n):n}async preserveInlinePhpDirective(e){return i.replace(e,new RegExp(`(?!\\/\\*.*?\\*\\/)(${F.join("|")})(\\s*?)${y}`,"gmsi"),t=>this.storeInlinePhpDirective(t))}preserveBladeDirectivesInScripts(e){return i.replace(e,/(?<=<script[^>]*?(?<!=)>)(.*?)(?=<\/script>)/gis,t=>{let n=[...P,...F];if(new RegExp(n.join("|"),"gmi").test(t)===!1)return/^[\s\n]+$/.test(t)?t.trim():t;let r=F.join("|"),s=new RegExp(`(?!\\/\\*.*?\\*\\/)(${r})(\\s*?)${y}`,"gmi"),a=i.chain(I).without("@endphp"),l=t;return l=i.replace(l,s,o=>this.storeBladeDirective(S(o,{...this.options,printWidth:L}))),l=i.replace(l,new RegExp(`(${P.join("|")})\\s*?${y}`,"gis"),o=>`if ( /*${this.storeBladeDirectiveInScript(o)}*/ ) {`),l=i.replace(l,new RegExp(`(${[...R,...G].join("|")})(?!\\w+?\\s*?\\(.*?\\))`,"gis"),o=>`/***script_placeholder***/} /* ${this.storeBladeDirectiveInScript(o)} */ {`),l=i.replace(l,new RegExp(`(${a.join("|")})`,"gis"),o=>`/***script_placeholder***/} /*${this.storeBladeDirectiveInScript(o)}*/`),l=i.replace(l,/(?<!@)@php(.*?)@endphp/gis,(o,c)=>this.storeRawBlock(c)),l=this.preserveCustomDirectiveInScript(l),l})}preserveBladeDirectivesInStyles(e){return i.replace(e,/(?<=<style[^>]*?(?<!=)>)(.*?)(?=<\/style>)/gis,t=>{let n=t,r=new RegExp(`(?!${["@end","@else",...X].join("|")})@(\\w+)\\s*?(?![^\\1]*@end\\1)${y}`,"gmi");n=i.replace(n,r,c=>`${this.storeBladeDirectiveInStyle(c)} {/* inline_directive */}`);let s=new RegExp(`(?!${["@end","@else",...X].join("|")})@(\\w+)\\s*?(${y})`,"gmi");n=i.replace(n,s,c=>`${this.storeBladeDirectiveInStyle(c)} { /*start*/`);let a=new RegExp(`(${P.join("|")})\\s*?(${y})`,"gmi");n=i.replace(n,a,c=>`${this.storeBladeDirectiveInStyle(c)} { /*start*/`);let l=new RegExp(`(${["@else\\w+",...R].join("|")})\\s*?(${y})?`,"gmi");n=i.replace(n,l,c=>`} ${this.storeBladeDirectiveInStyle(c)} { /*else*/`);let o=new RegExp(`${["@end\\w+",...I].join("|")}`,"gmi");return n=i.replace(n,o,c=>`} /* ${this.storeBladeDirectiveInStyle(c)} */`),n})}preserveCustomDirectiveInScript(e){let t=[...i.without(P,"@unless"),...I,...R,"@unless\\(.*?\\)"].join("|"),n=[...i.without(P,"@unless"),...I,...R,...F,...k,"@unless[a-z]*\\(.*?\\)",...N].join("|"),r=new RegExp(`(?!(${n}))(@([a-zA-Z1-9_\\-]+))(?!.*?@end\\3)${y}.*?(?<!@end\\5)`,"gis"),s=new RegExp(`(?!(${t}))(@(unless)*([a-zA-Z1-9_\\-]+))(?!.*?\\2)(\\s|\\(.*?\\))+(.*?)(@end\\4)`,"gis"),a;return a=i.replace(e,r,l=>this.storeInlineCustomDirective(l)),a=i.replace(a,s,(l,o,c,d,p,u,g,$)=>{if(P.includes(c))return l;let w=l;return w=i.replace(w,new RegExp(`${c}(${y})*`,"gim"),C=>`if ( /*${this.storeBladeDirectiveInScript(C)}*/ ) {`),w=i.replace(w,new RegExp(`@else${p}(${y})*`,"gim"),C=>`/***script_placeholder***/} /* ${this.storeBladeDirectiveInScript(C)} */ {`),w=i.replace(w,$,C=>`/***script_placeholder***/} /*${this.storeBladeDirectiveInScript(C)}*/`),w}),s.test(a)&&(a=this.preserveCustomDirectiveInScript(a)),a}breakLineBeforeAndAfterDirective(e){e=i.replace(e,new RegExp(`(?<=<.*?(?<!=)>)(${i.without(P,"@php").join("|")})(\\s*)${y}.*?(?=<.*?>)`,"gmis"),s=>`
${s.trim()}
`),e=i.replace(e,new RegExp(`(?<=<.*?(?<!=)>).*?(${i.without(I,"@endphp").join("|")})(?=<.*?>)`,"gmis"),s=>`
${s.trim()}
`);let t=["@case",...R];e=i.replace(e,new RegExp(`(\\s*?)(${t.join("|")})(\\s*?)${y}(\\s*)`,"gmi"),s=>`
${s.trim()}
`),e=i.replace(e,new RegExp(`\\s*?(?!(${i.without(R,"@else").join("|")}))@else\\s+`,"gim"),s=>`
${s.trim()}
`),e=i.replace(e,/@case\S*?\s*?@case/gim,s=>`${s.replace(`
`,"")}`);let n=["@break"];i.forEach(n,s=>{e=i.replace(e,new RegExp(`(\\s*?)${s}\\s+`,"gmi"),a=>`
${a.trim()}

`)}),i.forEach(["@default"],s=>{e=i.replace(e,new RegExp(`(\\s*?)${s}\\s*`,"gmi"),a=>`

${a.trim()}
`)});let r=i.chain(P).map(s=>i.replace(s,/@/,"")).value();return i.forEach(r,s=>{try{let a=Je.matchRecursive(e,`\\@${s}`,`\\@end${s}`,"gmi",{valueNames:[null,"left","match","right"]});if(i.isEmpty(a))return;for(let l of a)if(l.name==="match"){new RegExp(P.join("|")).test(l.value)&&(e=i.replace(e,l.value,this.breakLineBeforeAndAfterDirective(te(l.value))));let o=new RegExp(`^(\\s*?)${y}(.*)`,"gmis"),c=i.replace(`${l.value}`,o,(d,p,u,g)=>g.trim()===""?`${p}(${u.trim()})
${g.trim()}`:`${p}(${u.trim()})
${g.trim()}
`);e=i.replace(e,l.value,te(c))}}catch{}}),e}async preserveEscapedBladeDirective(e){return i.replace(e,/@@\w*/gim,t=>this.storeEscapedBladeDirective(t))}async preserveXslot(e){return i.replace(e,/(?<=<\/?)(x-slot:[\w_\\-]+)(?=(?:[^>]*?[^?])?>)/gm,t=>this.storeXslot(t))}async preserveBladeComment(e){return i.replace(e,/\{\{--(.*?)--\}\}/gs,t=>this.storeBladeComment(t))}preservePhpComment(e){return i.replace(e,/\/\*(?:[^*]|[\r\n]|(?:\*+(?:[^*\/]|[\r\n])))*\*+\//gi,t=>this.storePhpComment(t))}async preserveBladeBrace(e){return i.replace(e,/\{\{(.*?)\}\}/gs,(t,n)=>n===""?this.storeBladeBrace(n,n.length):/\S/.test(n)?this.storeBladeBrace(n.trim(),n.trim().length):this.storeBladeBrace(" ",1))}async preserveRawBladeBrace(e){return i.replace(e,/\{!!(.*?)!!\}/gs,(t,n)=>n===""?this.storeRawBladeBrace(n):/\S/.test(n)?this.storeRawBladeBrace(n.trim()):this.storeRawBladeBrace(" "))}async preserveConditions(e){let t=new RegExp(`(${le.join("|")})(\\s*?)${y}`,"gi");return i.replace(e,t,(n,r,s,a)=>`${r}${s}(${this.storeConditions(a)})`)}preserveUnbalancedDirective(e){let t=new RegExp(`((${N.join("|")})(?!.*?\\2)(?:\\s|\\(.*?\\)))+(?=.*?@endif)`,"gis"),n=i.replace(e,t,(r,s)=>`${this.storeUnbalancedDirective(s)}`);return t.test(n)&&(n=this.preserveUnbalancedDirective(n)),n}async preserveRawPhpTags(e){return i.replace(e,/<\?php(.*?)\?>/gms,t=>this.storeRawPhpTags(t))}async preserveNonnativeScripts(e){return i.replace(e,/<script[^>]*?type=(["'])(?!(text\/javascript|module))[^\1]*?\1[^>]*?>.*?<\/script>/gis,t=>this.storeNonnativeScripts(t))}async preserveScripts(e){return i.replace(e,/<script.*?>.*?<\/script>/gis,t=>this.storeScripts(t))}async preserveHtmlAttributes(e){return i.replace(e,/(?<=<[\w]*?[\s].*?)[\w\-\_\:]+?=(["']).*?(?<!\\)\1(?=.*?(?<!=)>)/gms,t=>`${this.storeHtmlAttribute(t)}`)}async sortHtmlAttributes(e){var n;let t=(n=this.options.sortHtmlAttributes)!=null?n:"none";if(!i.isEmpty(t)&&t!=="none"){let r=this.options.customHtmlAttributesOrder;if(i.isArray(r))return Pe(e,{order:t,customRegexes:r});let s=i.chain(r).split(",").map(i.trim).value();return Pe(e,{order:t,customRegexes:s})}return e}async preserveShorthandBinding(e){return i.replace(e,/(?<=<(?!livewire:)[^<]*?(\s|x-bind)):{1}(?<!=>)[\w\-_.]*?=(["'])(?!=>)[^]*?\2(?=[^>]*?\/*?>)/gim,t=>`${this.storeShorthandBinding(t)}`)}async preserveComponentAttribute(e){return i.replace(e,/(?<=<(x-|livewire:)[^<]*?\s):{1,2}(?<!=>)[\w\-_.]*?=(["'])(?!=>)[^]*?\2(?=[^>]*?\/*?>)/gim,t=>`${this.storeComponentAttribute(t)}`)}async formatXData(e){return i.replace(e,/(\s*)x-data="(.*?)"(\s*)/gs,(t,n,r,s)=>`${n}x-data="${this.storeXData(r)}"${s}`)}async formatXInit(e){return i.replace(e,/(\s*)x-init="(.*?)"(\s*)/gs,(t,n,r,s)=>`${n}x-init="${this.storeXInit(r)}"${s}`)}preserveStringLiteralInPhp(e){return i.replace(e,/(\"([^\\]|\\.)*?\"|\'([^\\]|\\.)*?\')/gm,t=>`${this.storeStringLiteralInPhp(t)}`)}storeIgnoredLines(e){return this.getIgnoredLinePlaceholder(this.ignoredLines.push(e)-1)}storeCurlyBraceForJS(e){return this.getCurlyBraceForJSPlaceholder(this.curlyBracesWithJSs.push(e)-1)}storeRawBlock(e){return this.getRawPlaceholder(this.rawBlocks.push(e)-1)}storeInlineDirective(e){return this.getInlinePlaceholder(this.inlineDirectives.push(e)-1,e.length)}storeConditions(e){return this.getConditionPlaceholder(this.conditions.push(e)-1)}storeInlinePhpDirective(e){return this.getInlinePhpPlaceholder(this.inlinePhpDirectives.push(e)-1)}storeRawPropsBlock(e){return this.getRawPropsPlaceholder(this.rawPropsBlocks.push(e)-1)}storeBladeDirective(e){return this.getBladeDirectivePlaceholder(this.bladeDirectives.push(e)-1)}storeBladeDirectiveInStyle(e){return this.getBladeDirectiveInStylePlaceholder((this.bladeDirectivesInStyle.push(e)-1).toString())}storeEscapedBladeDirective(e){return this.getEscapedBladeDirectivePlaceholder((this.escapedBladeDirectives.push(e)-1).toString())}storeXslot(e){return this.getXslotPlaceholder((this.xSlot.push(e)-1).toString())}storeBladeComment(e){return this.getBladeCommentPlaceholder(this.bladeComments.push(e)-1)}storePhpComment(e){return this.getPhpCommentPlaceholder((this.phpComments.push(e)-1).toString())}storeHtmlTag(e){return this.getHtmlTagPlaceholder((this.htmlTags.push(e)-1).toString())}storeInlineCustomDirective(e){return this.getInlineCustomDirectivePlaceholder((this.customDirectives.push(e)-1).toString())}storeBeginCustomDirective(e){return this.getBeginCustomDirectivePlaceholder((this.customDirectives.push(e)-1).toString())}storeElseCustomDirective(e){return this.getElseCustomDirectivePlaceholder((this.customDirectives.push(e)-1).toString())}storeEndCustomDirective(e){return this.getEndCustomDirectivePlaceholder((this.customDirectives.push(e)-1).toString())}storeUnbalancedDirective(e){return this.getUnbalancedDirectivePlaceholder((this.unbalancedDirectives.push(e)-1).toString())}storeBladeBrace(e,t){let n=this.bladeBraces.push(e)-1,r="{{  }}";return this.getBladeBracePlaceholder(n,t+r.length)}storeRawBladeBrace(e){let t=this.rawBladeBraces.push(e)-1;return this.getRawBladeBracePlaceholder(t)}storeRawPhpTags(e){let t=this.rawPhpTags.push(e)-1;return this.getRawPhpTagPlaceholder(t)}storeNonnativeScripts(e){let t=this.nonnativeScripts.push(e)-1;return this.getNonnativeScriptPlaceholder(t.toString())}storeScripts(e){let t=this.scripts.push(e)-1;return this.getScriptPlaceholder(t)}storeHtmlAttribute(e){let t=this.htmlAttributes.push(e)-1;return e.length>0?this.getHtmlAttributePlaceholder(t.toString(),e.length):this.getHtmlAttributePlaceholder(t.toString(),0)}storeShorthandBinding(e){let t=this.shorthandBindings.push(e)-1;return this.getShorthandBindingPlaceholder(t.toString(),e.length)}storeComponentAttribute(e){let t=this.componentAttributes.push(e)-1;return this.getComponentAttributePlaceholder(t.toString())}storeXData(e){let t=this.xData.push(e)-1;return this.getXDataPlaceholder(t)}storeXInit(e){let t=this.xInit.push(e)-1;return this.getXInitPlaceholder(t)}storeTemplatingString(e){let t=this.templatingStrings.push(e)-1;return this.getTemplatingStringPlaceholder(t)}storeStringLiteralInPhp(e){let t=this.stringLiteralInPhp.push(e)-1;return this.getStringLiteralInPhpPlaceholder(t)}storeBladeDirectiveInScript(e){return this.getBladeDirectiveInScriptPlaceholder((this.directivesInScript.push(e)-1).toString())}getIgnoredLinePlaceholder(e){return i.replace("___ignored_line_#___","#",e)}getCurlyBraceForJSPlaceholder(e){return i.replace("___js_curly_brace_#___","#",e)}getRawPlaceholder(e){return i.replace("___raw_block_#___","#",e)}getInlinePlaceholder(e,t=0){if(t>0){let r=t-"___inline_directive_#___".length;return i.replace(`___inline_directive_${i.repeat("_",r>0?r:0)}#___`,"#",e)}return i.replace("___inline_directive_+?#___","#",e)}getConditionPlaceholder(e){return i.replace("___directive_condition_#___","#",e)}getInlinePhpPlaceholder(e){return i.replace("___inline_php_directive_#___","#",e)}getRawPropsPlaceholder(e){return i.replace("@__raw_props_block_#__@","#",e)}getBladeDirectivePlaceholder(e){return i.replace("___blade_directive_#___","#",e)}getBladeDirectiveInStylePlaceholder(e){return i.replace(".___blade_directive_in_style_#__","#",e)}getEscapedBladeDirectivePlaceholder(e){return i.replace("___escaped_directive_#___","#",e)}getXslotPlaceholder(e){return i.replace("x-slot --___#___--","#",e)}getBladeCommentPlaceholder(e){return i.replace("___blade_comment_#___","#",e)}getPhpCommentPlaceholder(e){return i.replace("___php_comment_#___","#",e)}getBladeBracePlaceholder(e,t=0){if(t>0){let r=t-"___blade_brace_#___".length;return i.replace(`___blade_brace_${i.repeat("_",r>0?r:0)}#___`,"#",e)}return i.replace("___blade_brace_+?#___","#",e)}getRawBladeBracePlaceholder(e){return i.replace("___raw_blade_brace_#___","#",e)}getRawPhpTagPlaceholder(e){return i.replace("___raw_php_tag_#___","#",e)}getNonnativeScriptPlaceholder(e){return i.replace("<blade___non_native_scripts_#___ />","#",e)}getScriptPlaceholder(e){return i.replace("<blade___scripts_#___ />","#",e)}getHtmlTagPlaceholder(e){return i.replace("<blade___html_tags_#___ />","#",e)}getInlineCustomDirectivePlaceholder(e){return i.replace("___inline_cd_#___","#",e)}getBeginCustomDirectivePlaceholder(e){return i.replace("@customdirective(___#___)","#",e)}getElseCustomDirectivePlaceholder(e){return i.replace("@else(___#___)","#",e)}getEndCustomDirectivePlaceholder(e){return i.replace("@endcustomdirective(___#___)","#",e)}getUnbalancedDirectivePlaceholder(e){return i.replace("@if (unbalanced___#___)","#",e)}getHtmlAttributePlaceholder(e,t){if(t&&t>0){let r=t-"___attrs_#___".length;return i.replace(`___attrs${i.repeat("_",r>0?r:1)}#___`,"#",e)}return i.isNull(t)?i.replace("___attrs_#___","#",e):i.replace("___attrs_+?#___","#",e)}getShorthandBindingPlaceholder(e,t=0){if(t&&t>0){let r=t-"___short_binding_#___".length;return i.replace(`___short_binding_${i.repeat("_",r>0?r:1)}#___`,"#",e)}return i.replace("___short_binding_+?#___","#",e)}getComponentAttributePlaceholder(e){return i.replace("___attribute_#___","#",e)}getXInitPlaceholder(e){return i.replace("___x_init_#___","#",e)}getPlaceholder(e,t,n=null){if(n&&n>0){let r=`___${e}_#___`,s=n-r.length;return i.replace(`___${e}${i.repeat("_",s>0?s:1)}#___`,"#",t)}return i.isNull(n)?i.replace(`___${e}_#___`,"#",t):i.replace(`s___${e}_+?#___`,"#",t)}getXDataPlaceholder(e){return i.replace("___x_data_#___","#",e)}getTemplatingStringPlaceholder(e){return i.replace("___templating_str_#___","#",e)}getStringLiteralInPhpPlaceholder(e){return i.replace("'___php_content_#___'","#",e)}getBladeDirectiveInScriptPlaceholder(e){return i.replace("___directives_script_#___","#",e)}restoreIgnoredLines(e){return i.replace(e,new RegExp(`${this.getIgnoredLinePlaceholder("(\\d+)")}`,"gm"),(t,n)=>this.ignoredLines[n])}restoreCurlyBraceForJS(e){return i.replace(e,new RegExp(`${this.getCurlyBraceForJSPlaceholder("(\\d+)")}`,"gm"),(t,n)=>`@{{ ${E.js_beautify(this.curlyBracesWithJSs[n].trim())} }}`)}restorePhpBlock(e){return this.restoreRawPhpBlock(e).then(t=>this.restoreRawPropsBlock(t))}async restoreRawPhpBlock(e){return i.replace(e,new RegExp(`${this.getRawPlaceholder("(\\d+)")}`,"gm"),(t,n)=>{var o;let r=this.rawBlocks[n],s=this.getRawPlaceholder(n.toString()),a=(o=e.match(new RegExp(`^(.*?)${s}`,"gmi")))!=null?o:[""],l=v(a[0]);return this.isInline(r)&&this.isMultilineStatement(r)?r=D(`<?php
${r}
?>`,this.options).trim():r.split(`
`).length>1?r=D(`<?php${r}?>`,this.options).trimRight(`
`):r=`<?php${r}?>`,i.replace(r,/^(\s*)?<\?php(.*?)\?>/gms,(c,d,p)=>{if(this.isInline(r))return`@php${p}@endphp`;let u=this.preserveStringLiteralInPhp(p);u=this.preservePhpComment(u);let g=this.indentRawBlock(l,u);return g=this.restorePhpComment(g),`@php${this.restoreStringLiteralInPhp(g)}@endphp`})})}async restoreRawPropsBlock(e){let t=this.getRawPropsPlaceholder("(\\d+)");return i.replace(e,new RegExp(t,"gms"),(n,r)=>`@props(${S(this.rawPropsBlocks[r],{...this.options,printWidth:L}).trimRight()})`)}isInline(e){return i.split(e,`
`).length===1}isMultilineStatement(e){return D(`<?php${e}?>`,this.options).trimRight().split(`
`).length>1}indentRawBlock(e,t){if(this.isInline(t))return`${e.indent}${t}`;let r=e.amount/this.indentSize,s=this.indentCharacter.repeat(r<0?0:(r+1)*this.indentSize),a=this.indentCharacter.repeat(r<0?0:r*this.indentSize),l=t.split(`
`);return i.chain(l).map((o,c)=>c===0?o.trim():c===l.length-1?a+o:s+o).join(`
`).value()}indentBladeDirectiveBlock(e,t){if(i.isEmpty(e.indent))return t;if(this.isInline(t))return`${e.indent}${t}`;let r=e.amount/this.indentSize,s=this.indentCharacter.repeat(r<0?0:r*this.indentSize),a=this.indentCharacter.repeat(r<0?0:r*this.indentSize),l=t.split(`
`);return i.chain(l).map((o,c)=>c===l.length-1?a+o:s+o).value().join(`
`)}indentScriptBlock(e,t){if(i.isEmpty(e.indent))return t;if(this.isInline(t))return`${t}`;let r=e.amount/this.indentSize,s=this.indentCharacter.repeat(r<0?0:r*this.indentSize),a=this.indentCharacter.repeat(r<0?0:r*this.indentSize),o=i.replace(t,/`.*?`/gs,d=>this.storeTemplatingString(d)).split(`
`),c=i.chain(o).map((d,p)=>p===0?d:p===o.length-1?a+d:i.isEmpty(d)?d:s+d).value().join(`
`);return this.restoreTemplatingString(`${c}`)}indentRawPhpBlock(e,t){if(i.isEmpty(e.indent))return t;if(this.isInline(t))return`${t}`;let r=e.amount/this.indentSize,s=this.indentCharacter.repeat(r<0?0:r*this.indentSize),a=t.split(`
`);return i.chain(a).map((l,o)=>o===0?l.trim():s+l).value().join(`
`)}indentComponentAttribute(e,t){if(i.isEmpty(e))return t;if(this.isInline(t))return`${t}`;if(this.isInline(t)&&/\S/.test(e))return`${t}`;let r=v(e).amount/this.indentSize,s=this.indentCharacter.repeat(r<0?0:r*this.indentSize),a=t.split(`
`);return i.chain(a).map((l,o)=>o===0?l.trim():s+l).value().join(`
`)}indentPhpComment(e,t){if(i.isEmpty(e.indent))return t;if(this.isInline(t))return`${t}`;let r=e.amount/this.indentSize,s=this.indentCharacter.repeat(r<0?0:r*this.indentSize),a=t.split(`
`),l=!1;return i.chain(a).map((o,c)=>c===0?o.trim():o.trim().startsWith("*")?o.trim().endsWith("*/")&&l?o:s+o:(l=!0,o)).join(`
`).value()}restoreBladeDirectivesInStyles(e){return i.replace(e,/(?<=<style[^>]*?(?<!=)>)(.*?)(?=<\/style>)/gis,t=>{let n=t,r=new RegExp(`${this.getBladeDirectiveInStylePlaceholder("(\\d+)")} {\\s*?/\\* inline_directive \\*/\\s*?}`,"gmi");n=i.replace(n,r,(o,c)=>this.bladeDirectivesInStyle[c]);let s=new RegExp(`}\\s*?${this.getBladeDirectiveInStylePlaceholder("(\\d+)")} {\\s*?/\\*else\\*/`,"gmi");n=i.replace(n,s,(o,c)=>`${this.bladeDirectivesInStyle[c]}`);let a=new RegExp(`${this.getBladeDirectiveInStylePlaceholder("(\\d+)")} {\\s*?/\\*start\\*/`,"gmi");n=i.replace(n,a,(o,c)=>`${this.bladeDirectivesInStyle[c]}`);let l=new RegExp(`}\\s*?/\\* ${this.getBladeDirectiveInStylePlaceholder("(\\d+)")} \\*/`,"gmi");return n=i.replace(n,l,(o,c)=>`${this.bladeDirectivesInStyle[c]}`),n})}restoreBladeDirectivesInScripts(e){let t=new RegExp(`${this.getBladeDirectivePlaceholder("(\\d+)")}`,"gm"),n=i.replace(e,t,(r,s)=>{var c;let a=this.getBladeDirectivePlaceholder(s.toString()),l=(c=e.match(new RegExp(`^(.*?)${a}`,"gmi")))!=null?c:[""],o=v(l[0]);return this.indentBladeDirectiveBlock(o,this.bladeDirectives[s])});return n=i.replace(n,/(?<=<script[^>]*?(?<!=)>)(.*?)(?=<\/script>)/gis,r=>{let s=r;return s=i.replace(s,new RegExp(`if \\( \\/\\*(?:(?:${this.getBladeDirectiveInScriptPlaceholder("(\\d+)")}).*?)\\*\\/ \\) \\{`,"gis"),(a,l)=>`${this.directivesInScript[l]}`),s=i.replace(s,new RegExp(`} \\/\\* (?:${this.getBladeDirectiveInScriptPlaceholder("(\\d+)")}) \\*\\/ {(\\s*?\\(___directive_condition_\\d+___\\))?`,"gim"),(a,l,o)=>i.isUndefined(o)?`${this.directivesInScript[l].trim()}`:`${this.directivesInScript[l].trim()} ${(o!=null?o:"").trim()}`),s=i.replace(s,new RegExp(`} \\/\\*(?:${this.getBladeDirectiveInScriptPlaceholder("(\\d+)")})\\*\\/`,"gis"),(a,l)=>`${this.directivesInScript[l]}`),s=i.replace(s,new RegExp(`${this.getRawPlaceholder("(\\d+)")}`,"gm"),(a,l)=>{var u;let o=this.rawBlocks[l],c=this.getRawPlaceholder(l.toString()),d=(u=e.match(new RegExp(`^(.*?)${c}`,"gmi")))!=null?u:[""],p=v(d[0]);return this.isInline(o)&&this.isMultilineStatement(o)?o=D(`<?php
${o}
?>`,this.options).trim():o.split(`
`).length>1?o=D(`<?php${o}?>`,this.options).trim():o=`<?php${o}?>`,i.replace(o,/^(\s*)?<\?php(.*?)\?>/gms,(g,$,w)=>{if(this.isInline(o))return`@php${w}@endphp`;let C=this.preserveStringLiteralInPhp(w),Be=this.indentRawBlock(p,C);return`@php${this.restoreStringLiteralInPhp(Be)}@endphp`})}),s=i.replace(s,/(?<=[\S]+)(\s*?)\/\*\*\*script_placeholder\*\*\*\/(\s)?/gim,(a,l,o)=>{if(o!==void 0)return o;let c=l!=null?l:"",d=o!=null?o:"";return c+d}),s}),t.test(n)&&(n=this.restoreBladeDirectivesInScripts(n)),n}async formatPreservedBladeDirectives(e){return Ne.map(e,async t=>{let n=await this.formatAsHtml(t);return(await this.formatAsBlade(n)).trimRight(`
`)})}restoreBladeComment(e){return new Promise(t=>t(e)).then(t=>i.replace(t,new RegExp(`${this.getBladeCommentPlaceholder("(\\d+)")}`,"gms"),(n,r)=>this.bladeComments[r].replace(/{{--(?=\S)/g,"{{-- ").replace(/(?<=\S)--}}/g," --}}")))}restoreXslot(e){return i.replace(e,/x-slot\s*--___(\d+)___--/gms,(t,n)=>this.xSlot[n]).replace(/(?<=<x-slot:[\w\_\-]*)\s+(?=\/?>)/gm,()=>"")}restorePhpComment(e){return i.replace(e,new RegExp(`${this.getPhpCommentPlaceholder("(\\d+)")};{0,1}`,"gms"),(t,n)=>{var o;let r=this.getPhpCommentPlaceholder(n.toString()),s=(o=e.match(new RegExp(`^(.*?)${r}`,"gmi")))!=null?o:[""],a=v(s[0]),l=ie(this.phpComments[n]);return this.indentPhpComment(a,l)})}async restoreEscapedBladeDirective(e){return new Promise(t=>t(e)).then(t=>i.replace(t,new RegExp(`${this.getEscapedBladeDirectivePlaceholder("(\\d+)")}`,"gms"),(n,r)=>this.escapedBladeDirectives[r]))}restoreBladeBrace(e){return new Promise(t=>t(e)).then(t=>i.replace(t,new RegExp(`${this.getBladeBracePlaceholder("(\\d+)")}`,"gm"),(n,r)=>{var c;let s=this.getBladeBracePlaceholder(r.toString()),a=(c=e.match(new RegExp(`^(.*?)${s}`,"gmi")))!=null?c:[""],l=v(a[0]),o=this.bladeBraces[r];return o.trim()===""?`{{${o}}}`:this.isInline(o)?`{{ ${S(o,{...this.options,trailingCommaPHP:!1,printWidth:L}).replace(/([\n\s]*)->([\n\s]*)/gs,"->").split(`
`).map(d=>d.trim()).join("").trimRight(`
`)} }}`:`{{ ${this.indentRawPhpBlock(l,S(o,this.options).replace(/([\n\s]*)->([\n\s]*)/gs,"->").trim().trimRight(`
`))} }}`}))}restoreRawBladeBrace(e){return new Promise(t=>t(e)).then(t=>i.replace(t,new RegExp(`${this.getRawBladeBracePlaceholder("(\\d+)")}`,"gms"),(n,r)=>{var c;let s=this.getRawBladeBracePlaceholder(r),a=(c=e.match(new RegExp(`^(.*?)${s}`,"gmi")))!=null?c:[""],l=v(a[0]),o=this.rawBladeBraces[r];return o.trim()===""?`{!!${o}!!}`:this.indentRawPhpBlock(l,`{!! ${S(o,this.options).replace(/([\n\s]*)->([\n\s]*)/gs,"->").trim()} !!}`)}))}restoreInlineDirective(e){return new Promise(t=>t(e)).then(t=>i.replace(t,new RegExp(`${this.getInlinePlaceholder("(\\d+)")}`,"gms"),(n,r)=>this.inlineDirectives[r]))}restoreConditions(e){return new Promise(t=>t(e)).then(t=>i.replace(t,new RegExp(`${this.getConditionPlaceholder("(\\d+)")}`,"gms"),(n,r)=>{var c;let s=this.getConditionPlaceholder(r),a=(c=e.match(new RegExp(`^(.*?)${s}`,"gmi")))!=null?c:[""],l=v(a[0]),o=this.conditions[r];return this.formatExpressionInsideBladeDirective(o,l)}))}restoreUnbalancedDirective(e){return new Promise(t=>t(e)).then(t=>i.replace(t,/@if \(unbalanced___(\d+)___\)/gms,(n,r)=>this.unbalancedDirectives[r]))}restoreInlinePhpDirective(e){return new Promise(t=>t(e)).then(t=>i.replace(t,new RegExp(`${this.getInlinePhpPlaceholder("(\\d+)")}`,"gm"),(n,r)=>{var c;let s=this.inlinePhpDirectives[r],a=this.getInlinePhpPlaceholder(r),l=(c=e.match(new RegExp(`^(.*?)${a}`,"gmi")))!=null?c:[""],o=v(l[0]);return s.includes("@php")?`${S(s,{...this.options,printWidth:L}).replace(/([\n\s]*)->([\n\s]*)/gs,"->").trim().trimRight(`
`)}`:new RegExp(Z.join("|"),"gi").test(s)?i.replace(s,new RegExp(`(?<=@(${i.map(Z,p=>p.substring(1)).join("|")}).*?\\()(.*)(?=\\))`,"gis"),(p,u,g)=>{let $=this.wrapLineLength;return["button","class"].includes(u)&&($=80),u==="include"&&($=this.wrapLineLength-4-r.length-o.amount),this.formatExpressionInsideBladeDirective(g,o,$)}):`${S(s,{...this.options,printWidth:L}).trimEnd()}`}))}restoreRawPhpTags(e){return new Promise(t=>t(e)).then(t=>i.replace(t,new RegExp(`${this.getRawPhpTagPlaceholder("(\\d+)")}`,"gms"),(n,r)=>{var s;try{let a=this.rawPhpTags[r],o=/(?<=<\?php\s*?)\/\*.*?\*\/(?=\s*?\?>)/gim.test(a)&&this.isInline(a),c=this.getRawPhpTagPlaceholder(r),d=(s=e.match(new RegExp(`^(.*?)${c}`,"gmi")))!=null?s:[""],p=v(d[0]);if(o)return a;let u=D(this.rawPhpTags[r],this.options).trim().trimRight(`
`);if(this.isInline(u))return u;let g=this.preservePhpComment(u);return p.indent&&(g=this.indentRawPhpBlock(p,g)),this.restorePhpComment(g)}catch{return`${this.rawPhpTags[r]}`}}))}restoreNonnativeScripts(e){return i.replace(e,new RegExp(`${this.getNonnativeScriptPlaceholder("(\\d+)")}`,"gmi"),(t,n)=>`${this.nonnativeScripts[n]}`)}restoreScripts(e){return new Promise(t=>t(e)).then(t=>i.replace(t,new RegExp(`${this.getScriptPlaceholder("(\\d+)")}`,"gim"),(n,r)=>{var p;let s=this.scripts[r],a=this.getScriptPlaceholder(r),l=(p=e.match(new RegExp(`^(.*?)${a}`,"gmi")))!=null?p:[""],o=v(l[0]),c=f(this.options).useTabs||!1,d={indent_size:f(this.options).indentSize||4,wrap_line_length:f(this.options).wrapLineLength||120,wrap_attributes:f(this.options).wrapAttributes||"auto",wrap_attributes_min_attrs:f(this.options).wrapAttributesMinAttrs,indent_inner_html:f(this.options).indentInnerHtml||!1,extra_liners:f(this.options).extraLiners,indent_with_tabs:c,end_with_newline:!1,templating:["php"]};return c?this.indentScriptBlock(o,i.replace(E.html_beautify(s,d),/\t/g,"	".repeat(this.indentSize))):this.indentScriptBlock(o,E.html_beautify(s,d))}))}async restoreCustomDirective(e){return this.restoreInlineCustomDirective(e).then(t=>this.restoreBeginCustomDirective(t)).then(t=>this.restoreElseCustomDirective(t)).then(t=>this.restoreEndCustomDirective(t))}async restoreInlineCustomDirective(e){return i.replace(e,new RegExp(`${this.getInlineCustomDirectivePlaceholder("(\\d+)")}`,"gim"),(t,n)=>{var o;let r=this.getInlineCustomDirectivePlaceholder(n.toString()),s=(o=e.match(new RegExp(`^(.*?)${i.escapeRegExp(r)}`,"gmi")))!=null?o:[""],a=v(s[0]),l=`${this.customDirectives[n]}`;return i.replace(l,/(@[a-zA-z0-9\-_]+)(.*)/gis,(c,d,p)=>{try{let u=S(`func${p}`,{...this.options,printWidth:L}).replace(/([\n\s]*)->([\n\s]*)/gs,"->").replace(/,(\s*?\))$/gm,(g,$)=>$).trim().substring(4);return`${d}${this.indentComponentAttribute(a.indent,u)}`}catch{return`${c}`}})})}async restoreBeginCustomDirective(e){return i.replace(e,new RegExp(`@customdirective\\(___(\\d+)___\\)\\s*?(${y})*`,"gim"),(t,n)=>{var o;let r=this.getBeginCustomDirectivePlaceholder(n.toString()),s=(o=e.match(new RegExp(`^(.*?)${i.escapeRegExp(r)}`,"gmi")))!=null?o:[""],a=v(s[0]),l=`${this.customDirectives[n]}`;return i.replace(l,/(@[a-zA-z0-9\-_]+)(.*)/gis,(c,d,p)=>{try{let u=S(`func${p}`,{...this.options,trailingCommaPHP:!1}).replace(/([\n\s]*)->([\n\s]*)/gs,"->").trim().substring(4);return`${d}${this.indentComponentAttribute(a.indent,u)}`}catch{return`${c}`}})})}async restoreElseCustomDirective(e){return i.replace(e,/@else\(___(\d+)___\)/gim,(t,n)=>`${this.customDirectives[n]}`)}async restoreEndCustomDirective(e){return i.replace(e,/@endcustomdirective\(___(\d+)___\)/gim,(t,n)=>`${this.customDirectives[n]}`)}async restoreHtmlTags(e){return i.replace(e,new RegExp(`${this.getHtmlTagPlaceholder("(\\d+)")}`,"gim"),(t,n)=>{var p;let r=this.getHtmlTagPlaceholder(n.toString()),s=(p=e.match(new RegExp(`^(.*?)${r}`,"gmi")))!=null?p:[""],a=v(s[0]),l={indent_size:f(this.options).indentSize||4,wrap_line_length:f(this.options).wrapLineLength||120,wrap_attributes:f(this.options).wrapAttributes||"auto",wrap_attributes_min_attrs:f(this.options).wrapAttributesMinAttrs,indent_inner_html:f(this.options).indentInnerHtml||!1,extra_liners:f(this.options).extraLiners,end_with_newline:!1,templating:["php"]},o=this.htmlTags[n],c=i.first(o.match(/(<(textarea|pre).*?(?<!=)>)(?=.*?<\/\2>)/gis));if(c===void 0)return`${this.indentScriptBlock(a,E.html_beautify(o,l))}`;let d=o.substring(c.length,o.length);return`${this.indentScriptBlock(a,E.html_beautify(c,l))}${d}`})}restoreHtmlAttributes(e){return i.replace(e,new RegExp(`${this.getHtmlAttributePlaceholder("(\\d+)")}`,"gms"),(t,n)=>this.htmlAttributes[n])}restoreXData(e){return i.replace(e,new RegExp(`${this.getXDataPlaceholder("(\\d+)")}`,"gm"),(t,n)=>{var u;let r=this.getXDataPlaceholder(n.toString()),s=(u=e.match(new RegExp(`^(.*?)${r}`,"gmi")))!=null?u:[""],a=v(s[0]),l=this.formatJS(this.xData[n]).split(`
`),o=a.amount/(this.indentCharacter==="	"?4:1),c=l[0],d=this.indentCharacter.repeat(o<0?0:o),p=l.map(g=>d+g);return p[0]=c,`${p.join(`
`)}`})}restoreXInit(e){return i.replace(e,new RegExp(`${this.getXInitPlaceholder("(\\d+)")}`,"gm"),(t,n)=>{var u;let r=this.getXInitPlaceholder(n.toString()),s=(u=e.match(new RegExp(`^(.*?)${r}`,"gmi")))!=null?u:[""],a=v(s[0]),l=this.formatJS(this.xInit[n]).split(`
`),o=a.amount/(this.indentCharacter==="	"?4:1),c=l[0],d=this.indentCharacter.repeat(o<0?0:o),p=l.map(g=>d+g);return p[0]=c,`${p.join(`
`)}`})}restoreTemplatingString(e){return i.replace(e,new RegExp(`${this.getTemplatingStringPlaceholder("(\\d+)")}`,"gms"),(t,n)=>this.templatingStrings[n])}restoreStringLiteralInPhp(e){return i.replace(e,new RegExp(`${this.getStringLiteralInPhpPlaceholder("(\\d+)")}`,"gms"),(t,n)=>this.stringLiteralInPhp[n])}restoreComponentAttribute(e){return i.replace(e,new RegExp(`${this.getComponentAttributePlaceholder("(\\d+)")}`,"gim"),(t,n)=>{var c;let r=this.getComponentAttributePlaceholder(n),s=(c=e.match(new RegExp(`^(.*?)${r}`,"gmi")))!=null?c:[""],a=v(s[0]),l=this.componentAttributes[n],o=i.replace(l,/(:{1,2}.*?=)(["'])(.*?)(?=\2)/gis,(d,p,u,g)=>{if(g==="")return d;if(p.startsWith("::"))return`${p}${u}${E.js_beautify(g,{wrap_line_length:this.wrapLineLength-a.amount,brace_style:"preserve-inline"}).trim()}`;if(this.isInline(g))try{return`${p}${u}${S(g,{...this.options,printWidth:this.wrapLineLength-a.amount}).trimEnd()}`}catch{return`${p}${u}${g}`}return`${p}${u}${S(g,{...this.options,printWidth:this.wrapLineLength-a.amount}).trimEnd()}`});return`${this.indentComponentAttribute(a.indent,o)}`})}restoreShorthandBinding(e){return i.replace(e,new RegExp(`${this.getShorthandBindingPlaceholder("(\\d+)")}`,"gms"),(t,n)=>{var c;let r=this.getShorthandBindingPlaceholder(n),s=(c=e.match(new RegExp(`^(.*?)${r}`,"gmi")))!=null?c:[""],a=v(s[0]),l=this.shorthandBindings[n],o=i.replace(l,/(:{1,2}.*?=)(["'])(.*?)(?=\2)/gis,(d,p,u,g)=>{let $={wrap_line_length:this.wrapLineLength-a.amount,brace_style:"preserve-inline"};if(g==="")return d;if(this.isInline(g))try{return`${p}${u}${E.js_beautify(g,$).trimEnd()}`}catch{return`${p}${u}${g}`}return`${p}${u}${E.js_beautify(g,$).trimEnd()}`});return`${this.indentComponentAttribute(a.indent,o)}`})}async formatAsBlade(e){this.currentIndentLevel=0,this.shouldBeIndent=!1;let t=j(e),n=await new U(this.vsctm,this.oniguruma);return n.createRegistry(e).loadGrammar("text.html.php.blade").then(a=>n.tokenizeLines(t,a)).then(a=>this.formatTokenizedLines(t,a)).catch(a=>{throw a})}formatTokenizedLines(e,t){this.result=[],this.stack=[];for(let n=0;n<e.length;n+=1){let r=e[n],s=t[n];this.processLine(s,r)}return this.result.join(this.endOfLine)}processLine(e,t){this.processTokenizeResult(e,t)}processKeyword(e){if(i.includes(k,e)){i.last(this.stack)==="@case"&&e==="@case"&&this.decrementIndentLevel(),e==="@case"&&(this.shouldBeIndent=!0),this.stack.push(e);return}if(i.includes(z,e)){if(e==="@break"){this.decrementIndentLevel(),this.stack.pop(),this.stack.push(e);return}if(i.last(this.stack)!=="@hassection"){this.stack.pop();return}}if(i.includes(oe,e)&&(this.shouldBeIndent=!0,this.stack.push(e)),i.includes(G,e)&&i.includes(ae,i.last(this.stack))&&(this.decrementIndentLevel(),this.shouldBeIndent=!0),i.includes(P,e)&&(i.last(this.stack)==="@section"&&e==="@section"?(this.currentIndentLevel>0&&this.decrementIndentLevel(),this.shouldBeIndent=!0,this.stack.push(e)):(this.shouldBeIndent=!0,this.stack.push(e))),i.includes(I,e)){if(e==="@endswitch"&&i.last(this.stack)==="@default"){this.decrementIndentLevel(2),this.shouldBeIndent=!1;return}this.decrementIndentLevel(),this.shouldBeIndent=!1,this.stack.pop()}i.includes(R,e)&&(this.decrementIndentLevel(),this.shouldBeIndent=!0)}processToken(e,t){if(i.includes(e.scopes,"punctuation.definition.comment.begin.blade")&&(this.isInsideCommentBlock=!0),this.argumentCheck){let{count:n,inString:r,stack:s}=this.argumentCheck;if(!r&&t===")"){if(s.push(t),n[t]+=1,n["("]===n[t]){let a=s.join("");de(a)>=this.argumentCheck.unindentOn&&(this.shouldBeIndent=!1),this.argumentCheck=!1}return}s.push(t),r===t?this.argumentCheck.inString=!1:!r&&(t==='"'||t==="'")&&(this.argumentCheck.inString=t),t==="("&&!r&&(n[t]+=1)}i.includes(e.scopes,"punctuation.definition.comment.end.blade")&&(this.isInsideCommentBlock=!1),(t==="{{--"||t.includes("{{--"))&&(this.isInsideCommentBlock=!0),(t==="--}}"||t.includes("--}}"))&&(this.isInsideCommentBlock=!1),i.includes(e.scopes,"keyword.blade")&&(this.isInsideCommentBlock||(this.processKeyword(t.toLowerCase()),i.includes(Object.keys(Q),t.toLowerCase())&&(this.argumentCheck={unindentOn:Q[t.toLowerCase()],stack:[],inString:!1,count:{"(":0,")":0}})))}processTokenizeResult(e,t){if(this.shouldBeIndent&&(this.incrementIndentLevel(),this.shouldBeIndent=!1),ce(e,t)){this.insertFormattedLineToResult(t);return}for(let n=0;n<e.tokens.length;n+=1){let r=e.tokens[n],s=t.substring(r.startIndex,r.endIndex).trim();this.processToken(r,s)}this.insertFormattedLineToResult(t)}insertFormattedLineToResult(e){let n=v(e).amount+this.indentSize*this.currentIndentLevel,r=this.indentCharacter.repeat(n<0?0:n)+e.trim();e.length===0&&this.result.push(e),e.length!==0&&r.length>0&&this.result.push(r),r!==e&&this.diffs.push({original:e,formatted:r})}incrementIndentLevel(e=1){this.currentIndentLevel+=e}decrementIndentLevel(e=1){this.currentIndentLevel-=e}formatExpressionInsideBladeDirective(e,t,n=void 0){let r=`func(${e})`,s=S(r,{...this.options,printWidth:n!=null?n:this.defaultPhpFormatOption.printWidth});if(s===r)return e;let a=s.replace(/([\n\s]*)->([\n\s]*)/gs,"->").replace(/(?<!(['"]).*)(?<=\()[\n\s]+?(?=\w)/gm,"").replace(/([^]*)],[\n\s]*?\)$/gm,(l,o)=>`${o}]
)`).replace(/,[\n\s]*?\)/gs,")").replace(/,(\s*?\))$/gm,(l,o)=>o).trim();return this.options.useTabs&&(a=i.replace(a,/(?<=^ *) {4}/gm,"	".repeat(this.indentSize))),a=a.replace(/func\((.*)\)/gis,(l,o)=>o),this.isInline(a.trim())&&(a=a.trim()),this.indentRawPhpBlock(t,a)}formatJS(e){let t=e,n={js:[],entangle:[]};return Object.keys(n).forEach(r=>{t=t.replace(new RegExp(`@${r}\\((?:[^)(]+|\\((?:[^)(]+|\\([^)(]*\\))*\\))*\\)`,"gs"),s=>{let a=n[r].push(s)-1;return this.getPlaceholder(r,a,s.length)})}),t=E.js_beautify(t,{brace_style:"preserve-inline"}),Object.keys(n).forEach(r=>{t=t.replace(new RegExp(this.getPlaceholder(r,"_*(\\d+)"),"gms"),(s,a)=>n[r][a])}),t}};import Me from"ajv";import Ue from"find-config";import Ve from"fs";import Ke from"path";var Qe=new Me,$e=[".bladeformatterrc.json",".bladeformatterrc"];function be(h){for(let e=0;e<$e.length;e+=1){let t=Ue($e[e],{cwd:Ke.dirname(h),home:!1});if(t)return t}return null}async function xe(h){if(h===null)return;let e=JSON.parse((await Ve.promises.readFile(h)).toString()),t={type:"object",properties:{indentSize:{type:"integer",nullable:!0},wrapLineLength:{type:"integer",nullable:!0},wrapAttributes:{type:"string",enum:["auto","force","force-aligned","force-expand-multiline","aligned-multiple","preserve","preserve-aligned"],nullable:!0},wrapAttributesMinAttrs:{type:"integer",nullable:!0,default:2},indentInnerHtml:{type:"boolean",nullable:!0},endWithNewline:{type:"boolean",nullable:!0},endOfLine:{type:"string",enum:["LF","CRLF"],nullable:!0},useTabs:{type:"boolean",nullable:!0},sortTailwindcssClasses:{type:"boolean",nullable:!0},tailwindcssConfigPath:{type:"string",nullable:!0},sortHtmlAttributes:{type:"string",enum:["none","alphabetical","code-guide","idiomatic","vuejs","custom"],nullable:!0},customHtmlAttributesOrder:{type:"array",nullable:!0,items:{type:"string"},default:[]},noMultipleEmptyLines:{type:"boolean",nullable:!0},noPhpSyntaxCheck:{type:"boolean",nullable:!0},noSingleQuote:{type:"boolean",nullable:!0},extraLiners:{type:"array",nullable:!0,items:{type:"string"},default:["head","body","/html"]}},additionalProperties:!0},n=Qe.compile(t);if(!n(e))throw n;return e}var V=class{constructor(e={},t=[]){var n;this.currentTargetPath=".",this.paths=t,this.options=e,this.targetFiles=[],this.errors=[],this.diffs=[],this.outputs=[],this.formattedFiles=[],this.ignoreFile="",this.fulFillFiles=[],this.targetFiles=[],this.runtimeConfigPath=(n=e.runtimeConfigPath)!=null?n:null,this.runtimeConfigCache={}}async format(e,t={}){this.options=this.options||t;let n=B.resolve(m.cwd(),"target");return await this.readIgnoreFile(n),await this.findTailwindConfig(n),await this.readRuntimeConfig(n),new T(this.options).formatContent(e).catch(r=>{throw new O(r)})}async formatFromCLI(){try{this.printPreamble(),await this.readIgnoreFile(m.cwd()),await this.processPaths(),this.printResults()}catch{}}fileExists(e){return W.promises.access(e,W.constants.F_OK).then(()=>!0).catch(()=>!1)}async readIgnoreFile(e){let t=".bladeignore",n,r=B.dirname(e);if(this.options.ignoreFilePath?n=this.options.ignoreFilePath:n=Se(t,{cwd:r}),!!n)try{this.ignoreFile=(await W.promises.readFile(n)).toString()}catch{}}async findTailwindConfig(e){if(!this.options.sortTailwindcssClasses)return;let t="tailwind.config.js",n;if(this.options.tailwindcssConfigPath)if(this.runtimeConfigPath){let r=B.dirname(this.runtimeConfigPath);n=B.resolve(r,this.options.tailwindcssConfigPath)}else B.isAbsolute(this.options.tailwindcssConfigPath)?n=B.resolve(this.options.tailwindcssConfigPath):n=B.resolve(this.options.tailwindcssConfigPath);else{let r=B.dirname(e);n=Se(t,{cwd:r})}n&&(this.options.tailwindcssConfigPath=n)}async readRuntimeConfig(e){var n,r;_.isEmpty(this.runtimeConfigCache)&&(this.options=_.merge(this.options,this.runtimeConfigCache));let t;if(this.options.runtimeConfigPath?t=this.options.runtimeConfigPath:t=be(e),!_.isNull(t)){this.runtimeConfigPath=t;try{let s=await xe(t);this.options=_.mergeWith(this.options,s,(a,l)=>_.isNil(l)?a:l),this.runtimeConfigCache=this.options,this.options.sortTailwindcssClasses&&await this.findTailwindConfig(e)}catch(s){s instanceof SyntaxError&&(m.stdout.write(b.red.bold(`
Blade Formatter JSON Syntax Error: 

`)),m.stdout.write(Ce.format(s)),m.exit(1)),m.stdout.write(b.red.bold(`
Blade Formatter Config Error: ${B.basename(t)}

`)),m.stdout.write(`\`${s.errors[0].instancePath.replace("/","")}\` ${s.errors[0].message}

`),(n=s.errors[0].params)!=null&&n.allowedValues&&console.log((r=s.errors[0].params)==null?void 0:r.allowedValues),m.exit(1)}}}async processPaths(){await Promise.all(_.map(this.paths,async e=>this.processPath(e)))}async processPath(e){await V.globFiles(e).then(t=>_.map(t,n=>B.relative(".",n))).then(t=>this.filterFiles(t)).then(this.fulFillFiles).then(t=>this.formatFiles(t))}static globFiles(e){return new Promise((t,n)=>{Ze(e,(r,s)=>r?n(r):t(s))})}async filterFiles(e){if(this.ignoreFile==="")return e;let t=/^\.\.*/,n=_.filter(e,a=>t.test(B.relative(".",a))),r=_.xor(e,n),s=Ge().add(this.ignoreFile).filter(r);return _.concat(n,s)}static fulFillFiles(e){return this.targetFiles.push(e),Promise.resolve(e)}async formatFiles(e){await Promise.all(_.map(e,async t=>this.formatFile(t)))}async formatFile(e){await this.findTailwindConfig(e),await this.readRuntimeConfig(e),await J(e).then(t=>Promise.resolve(t.toString("utf-8"))).then(t=>new T(this.options).formatContent(t)).then(t=>this.checkFormatted(e,t)).then(t=>this.writeToFile(e,t)).catch(t=>{this.handleError(e,t)})}async checkFormatted(e,t){this.printFormattedOutput(e,t);let n=W.readFileSync(e,"utf-8"),r=j(n),s=j(t),a=ge(e,r,s);return this.diffs.push(a),this.outputs.push(t),a.length>0&&((this.options.progress||this.options.write)&&m.stdout.write(b.green("F")),this.options.checkFormatted&&(m.stdout.write(`${e}
`),m.exitCode=1),this.formattedFiles.push(e)),a.length===0&&(this.options.progress||this.options.write)&&m.stdout.write(b.green(".")),Promise.resolve(t)}printFormattedOutput(e,t){this.options.write||this.options.checkFormatted||(m.stdout.write(`${t}`),_.last(this.paths)===e||_.last(this.targetFiles)===e)||(this.paths.length>1||this.targetFiles.length>1)&&m.stdout.write(`
`)}writeToFile(e,t){this.options.write&&(this.options.checkFormatted||t.length===0||_.isNull(t)||_.isEmpty(t)||W.writeFile(e,t,n=>{n&&(m.stdout.write(`${b.red(n.message)}
`),m.exit(1))}))}handleError(e,t){(this.options.progress||this.options.write)&&m.stdout.write(b.red("E")),m.exitCode=1,this.errors.push({path:e,message:t.message,error:t})}printPreamble(){this.options.checkFormatted&&m.stdout.write(`Check formatting... 
`)}async printResults(){this.printDescription(),this.printDifferences(),this.printFormattedFiles(),this.printErrors()}printDescription(){if(!this.options.write)return;let e=`

`;m.stdout.write(e),m.stdout.write(b.bold.green(`Fixed: F
`)),m.stdout.write(b.bold.red(`Errors: E
`)),m.stdout.write(b.bold("Not Changed: ")+b.bold.green(`.
`))}printFormattedFiles(){if(this.formattedFiles.length===0){this.options.checkFormatted&&m.stdout.write(b.bold(`
All matched files are formatted! 
`));return}if(!this.options.write){this.options.checkFormatted&&m.stdout.write(`
Above file(s) are formattable. Forgot to run formatter? Use ${b.bold("--write")} option to overwrite.
`);return}m.stdout.write(b.bold(`
Formatted Files: 
`)),_.each(this.formattedFiles,e=>m.stdout.write(`${b.bold(e)}
`))}printDifferences(){if(this.options.diff){if(m.stdout.write(b.bold(`
Differences: 

`)),_.filter(this.diffs,e=>e.length>0).length===0){m.stdout.write(b(`No changes found. 

`));return}_.each(this.diffs,e=>ue(e))}}printErrors(){_.isEmpty(this.errors)||(m.stdout.write(b.red.bold(`
Errors: 

`)),_.each(this.errors,e=>m.stdout.write(`${Ce.format(e)}
`)))}};export{V as BladeFormatter,T as Formatter};
//# sourceMappingURL=bundle.js.map
